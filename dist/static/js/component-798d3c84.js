import{_ as M,aA as tt,d5 as at,m as ri,ay as k,aq as V,b as _,de as ni,df as jr,dg as qr,l as B,n as we,f as ii,B as te,h as mt,dh as Mt,H as Nt,a as xt,aw as j,as as N,aF as Jr,P as q,ar as ot,S as kt,di as Rt,ax as D,Z as $,c as _t,dj as Ce,g as Y,i as ai,dk as Qr,d as Ge,M as nt,av as U,G as tn,v as Bt,bD as Ae,ap as L,ao as W,au as R,aE as Pt,b1 as J,X as Q,dl as oi,dm as si,a2 as Se,ad as en,an as Z,dn as li,dp as ui,ak as Te,cK as rn,dq as ci,aM as z,d3 as fi,bg as ee,b0 as nn,b6 as hi,V as di,U as vi,dr as pi,a6 as an,a0 as gi,ds as yi,x as Ct,r as mi,p as xi,dt as yt,du as _i,bx as bi,c5 as He,c6 as Ne,dv as on,bX as sn,dw as wi,al as ln,dx as Et,dy as un,dz as Ci,dA as P,dB as Ai,dC as We,dD as Si,dE as Ze,dF as Fe,I as Ti,ai as Mi,aG as $e,b$ as Ii,dG as Li,dH as Wt,aJ as cn,dI as Ye,dJ as Pi,dK as Di,dL as Oi,dM as ki,e as Ue,dN as Ri,dO as fn,dP as hn,dQ as Bi,cO as Ei,dR as zi,dS as Vi,dT as Gi,dU as Hi,a_ as Ni,dV as Wi,dW as Xe,dX as Zi}from"./SeriesDataSchema-e01fbb85.js";import{A as Fi,O as $i,a as Yi,N as Ui,Q as Xi,R as Zt,S as Ki,c as ji,T as qi,U as Ji,V as re,n as Ke,W as Qi,C as et,X as ta,Y as dn,F as ct,r as Vt,Z as ea,_ as ra,$ as je,a0 as na,a1 as ia,a2 as aa,a3 as oa}from"./Axis-641b6e86.js";import{c as vn,a as ne}from"./barGrid-2ac5151e.js";import{n as sa,c as pn}from"./symbol-b9709339.js";import{p as la,h as ua}from"./labelLayoutHelper-2c911300.js";import"./vendor-0df7ddac.js";var ca=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(tt);const fa=ca;var ie=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",at).models[0]},e.type="cartesian2dAxis",e}(tt);ri(ie,Fi);var gn={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},ha=k({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},gn),Me=k({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},gn),da=k({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Me),va=V({logBase:10},Me);const pa={category:ha,value:Me,time:da,log:va};var ga={value:1,category:1,time:1,log:1};function qe(r,e,t,n){_(ga,function(i,a){var o=k(k({},pa[a],!0),n,!0),s=function(l){M(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=e+"Axis."+a,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=ni(this),d=h?jr(c):{},v=f.getTheme();k(c,v.get(a+"Axis")),k(c,this.getDefaultOption()),c.type=Je(c),h&&qr(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=$i.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=e+"Axis."+a,u.defaultOption=o,u}(t);r.registerComponentModel(s)}),r.registerSubTypeDefaulter(e+"Axis",Je)}function Je(r){return r.type||(r.data?"category":"value")}var ya=function(){function r(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return r.prototype.getAxis=function(e){return this._axes[e]},r.prototype.getAxes=function(){return B(this._dimList,function(e){return this._axes[e]},this)},r.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),we(this.getAxes(),function(t){return t.scale.type===e})},r.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},r}();const ma=ya;var ae=["x","y"];function Qe(r){return r.type==="interval"||r.type==="time"}var xa=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=ae,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!Qe(t)||!Qe(n))){var i=t.getExtent(),a=n.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],u=a[1]-a[0];if(!(!l||!u)){var c=(s[0]-o[0])/l,f=(s[1]-o[1])/u,h=o[0]-i[0]*c,d=o[1]-a[0]*f,v=this._transform=[c,0,0,f,h,d];this._invTransform=ii([],v)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,n){var i=this.dataToPoint(t),a=this.dataToPoint(n),o=this.getArea(),s=new te(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,n,i){i=i||[];var a=t[0],o=t[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return mt(i,t,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,n)),i[1]=l.toGlobalCoord(l.dataToCoord(o,n)),i},e.prototype.clampData=function(t,n){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(t[0]),u=a.parse(t[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},e.prototype.pointToData=function(t,n){var i=[];if(this._invTransform)return mt(i,t,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(t[0]),n),i[1]=o.coordToData(o.toLocalCoord(t[1]),n),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(){var t=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(t[0],t[1]),a=Math.min(n[0],n[1]),o=Math.max(t[0],t[1])-i,s=Math.max(n[0],n[1])-a;return new te(i,a,o,s)},e}(ma),_a=function(r){M(e,r);function e(t,n,i,a,o){var s=r.call(this,t,n,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),t&&n[0]>n[1]&&n.reverse(),n},e.prototype.pointToData=function(t,n){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),n)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(Yi);const ba=_a;function oe(r,e,t){t=t||{};var n=r.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=e.get("offset")||0,v=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(o){var p=o.toGlobalCoord(o.dataToCoord(0));v[h.onZero]=Math.max(Math.min(p,v[1]),v[0])}a.position=[u==="y"?v[h[l]]:f[0],u==="x"?v[h[l]]:f[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=g[s],a.labelOffset=o?v[h[s]]-v[h.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Mt(t.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var y=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-y:y,a.z2=1,a}function tr(r){return r.get("coordinateSystem")==="cartesian2d"}function er(r){var e={xAxisModel:null,yAxisModel:null};return _(e,function(t,n){var i=n.replace(/Model$/,""),a=r.getReferringComponents(i,at).models[0];e[n]=a}),e}var Ft=Math.log;function wa(r,e,t){var n=Ui.prototype,i=n.getTicks.call(t),a=n.getTicks.call(t,!0),o=i.length-1,s=n.getInterval.call(t),l=Xi(r,e),u=l.extent,c=l.fixMin,f=l.fixMax;if(r.type==="log"){var h=Ft(r.base);u=[Ft(u[0])/h,Ft(u[1])/h]}r.setExtent(u[0],u[1]),r.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:f});var d=n.getExtent.call(r);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var v=n.getInterval.call(r),p=u[0],g=u[1];if(c&&f)v=(g-p)/o;else if(c)for(g=u[0]+v*o;g<u[1]&&isFinite(g)&&isFinite(u[1]);)v=Zt(v),g=u[0]+v*o;else if(f)for(p=u[1]-v*o;p>u[0]&&isFinite(p)&&isFinite(u[0]);)v=Zt(v),p=u[1]-v*o;else{var y=r.getTicks().length-1;y>o&&(v=Zt(v));var x=v*o;g=Math.ceil(u[1]/v)*v,p=Nt(g-x),p<0&&u[0]>=0?(p=0,g=Nt(x)):g>0&&u[1]<=0&&(g=0,p=-Nt(x))}var m=(i[0].value-a[0].value)/s,b=(i[o].value-a[o].value)/s;n.setExtent.call(r,p+v*m,g+v*b),n.setInterval.call(r,v),(m||b)&&n.setNiceExtent.call(r,p+v,g-v)}var Ca=function(){function r(e,t,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=ae,this._initCartesian(e,t,n),this.model=e}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(e,t){var n=this._axesMap;this._updateScale(e,this.model);function i(o){var s,l=Jr(o),u=l.length;if(u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=o[h],v=d.model,p=d.scale;re(p)&&v.get("alignTicks")&&v.get("interval")==null?c.push(d):(Ke(p,v),re(p)&&(s=d))}c.length&&(s||(s=c.pop(),Ke(s.scale,s.model)),_(c,function(g){wa(g.scale,g.model,s.scale)}))}}i(n.x),i(n.y);var a={};_(n.x,function(o){rr(n,"y",o,a)}),_(n.y,function(o){rr(n,"x",o,a)}),this.resize(this.model,t)},r.prototype.resize=function(e,t,n){var i=e.getBoxLayoutParams(),a=!n&&e.get("containLabel"),o=xt(i,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(_(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=Ki(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);o[f]-=c[f]+h,u.position==="top"?o.y+=c.height+h:u.position==="left"&&(o.x+=c.width+h)}}}),l()),_(this._coordsList,function(u){u.calcAffineTransform()});function l(){_(s,function(u){var c=u.isHorizontal(),f=c?[0,o.width]:[0,o.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),Aa(u,c?o.x:o.y)})}},r.prototype.getAxis=function(e,t){var n=this._axesMap[e];if(n!=null)return n[t||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var n="x"+e+"y"+t;return this._coordsMap[n]}j(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===t)return a[i]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(e,t,n){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},r.prototype.convertFromPixel=function(e,t,n){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},r.prototype._findConvertTarget=function(e){var t=e.seriesModel,n=e.xAxisModel||t&&t.getReferringComponents("xAxis",at).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",at).models[0],a=e.gridModel,o=this._coordsList,s,l;if(t)s=t.coordinateSystem,N(o,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},r.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},r.prototype._initCartesian=function(e,t,n){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",u("x"),this),t.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,_(s.x,function(c,f){_(s.y,function(h,d){var v="x"+f+"y"+d,p=new xa(v);p.master=i,p.model=e,i._coordsMap[v]=p,i._coordsList.push(p),p.addAxis(c),p.addAxis(h)})});function u(c){return function(f,h){if($t(f,e)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=o.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=o.left?"right":"left"),o[d]=!0;var v=new ba(c,ji(f),[0,0],f.get("type"),d),p=v.type==="category";v.onBand=p&&f.get("boundaryGap"),v.inverse=f.get("inverse"),f.axis=v,v.model=f,v.grid=a,v.index=h,a._axesList.push(v),s[c][h]=v,l[c]++}}}},r.prototype._updateScale=function(e,t){_(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(tr(i)){var a=er(i),o=a.xAxisModel,s=a.yAxisModel;if(!$t(o,t)||!$t(s,t))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,a){_(qi(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},r.prototype.getTooltipAxes=function(e){var t=[],n=[];return _(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);N(t,a)<0&&t.push(a),N(n,o)<0&&n.push(o)}),{baseAxes:t,otherAxes:n}},r.create=function(e,t){var n=[];return e.eachComponent("grid",function(i,a){var o=new r(i,e,t);o.name="grid_"+a,o.resize(i,t,!0),i.coordinateSystem=o,n.push(o)}),e.eachSeries(function(i){if(tr(i)){var a=er(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),n},r.dimensions=ae,r}();function $t(r,e){return r.getCoordSysModel()===e}function rr(r,e,t,n){t.getAxesOnZeroOf=function(){return a?[a]:[]};var i=r[e],a,o=t.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)nr(i[l])&&(a=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&nr(i[u])&&!n[c(i[u])]){a=i[u];break}a&&(n[c(a)]=!0);function c(f){return f.dim+"_"+f.index}}function nr(r){return r&&r.type!=="category"&&r.type!=="time"&&Ji(r)}function Aa(r,e){var t=r.getExtent(),n=t[0]+t[1];r.toGlobalCoord=r.dim==="x"?function(i){return i+e}:function(i){return n-i+e},r.toLocalCoord=r.dim==="x"?function(i){return i-e}:function(i){return n-i+e}}const Sa=Ca;var it=Math.PI,ut=function(){function r(e,t){this.group=new q,this.opt=t,this.axisModel=e,V(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new q({x:t.position[0],y:t.position[1],rotation:t.rotation});n.updateTransform(),this._transformGroup=n}return r.prototype.hasBuilder=function(e){return!!ir[e]},r.prototype.add=function(e){ir[e](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(e,t,n){var i=tn(t-e),a,o;return Bt(i)?(o=n>0?"top":"bottom",a="center"):Bt(i-it)?(o=n>0?"bottom":"top",a="center"):(o="middle",i>0&&i<it?a=n>0?"right":"left":a=n>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},r.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},r.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},r}(),ir={axisLine:function(r,e,t,n){var i=e.get(["axisLine","show"]);if(i==="auto"&&r.handleAutoShown&&(i=r.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=n.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(mt(s,s,o),mt(l,l,o));var c=ot({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new kt({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});Rt(f.shape,f.style.lineWidth),f.anid="line",t.add(f);var h=e.get(["axisLine","symbol"]);if(h!=null){var d=e.get(["axisLine","symbolSize"]);D(h)&&(h=[h,h]),(D(d)||Ae(d))&&(d=[d,d]);var v=sa(e.get(["axisLine","symbolOffset"])||0,d),p=d[0],g=d[1];_([{rotate:r.rotation+Math.PI/2,offset:v[0],r:0},{rotate:r.rotation-Math.PI/2,offset:v[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(y,x){if(h[x]!=="none"&&h[x]!=null){var m=pn(h[x],-p/2,-g/2,p,g,c.stroke,!0),b=y.r+y.offset,w=u?l:s;m.attr({rotation:y.rotate,x:w[0]+b*Math.cos(r.rotation),y:w[1]-b*Math.sin(r.rotation),silent:!0,z2:11}),t.add(m)}})}}},axisTickLabel:function(r,e,t,n){var i=Ia(t,n,e,r),a=Pa(t,n,e,r);if(Ma(e,a,i),La(t,n,e,r.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=la(B(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));ua(o)}},axisName:function(r,e,t,n){var i=Mt(r.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=r.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[a==="start"?u[0]-c*l:a==="end"?u[1]+c*l:(u[0]+u[1])/2,or(a)?r.labelOffset+o*l:0],h,d=e.get("nameRotate");d!=null&&(d=d*it/180);var v;or(a)?h=ut.innerTextLayout(r.rotation,d??r.rotation,o):(h=Ta(r.rotation,a,d||0,u),v=r.axisNameAvailableWidth,v!=null&&(v=Math.abs(v/Math.sin(h.rotation)),!isFinite(v)&&(v=null)));var p=s.getFont(),g=e.get("nameTruncate",!0)||{},y=g.ellipsis,x=Mt(r.nameTruncateMaxWidth,g.maxWidth,v),m=new $({x:f[0],y:f[1],rotation:h.rotation,silent:ut.isLabelSilent(e),style:_t(s,{text:i,font:p,overflow:"truncate",width:x,ellipsis:y,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(Ce({el:m,componentModel:e,itemName:i}),m.__fullText=i,m.anid="name",e.get("triggerEvent")){var b=ut.makeAxisEventDataBase(e);b.targetType="axisName",b.name=i,Y(m).eventData=b}n.add(m),m.updateTransform(),t.add(m),m.decomposeTransform()}}};function Ta(r,e,t,n){var i=tn(t-r),a,o,s=n[0]>n[1],l=e==="start"&&!s||e!=="start"&&s;return Bt(i-it/2)?(o=l?"bottom":"top",a="center"):Bt(i-it*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<it*1.5&&i>it/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function Ma(r,e,t){if(!Qi(r.axis)){var n=r.get(["axisLabel","showMinLabel"]),i=r.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],u=t[0],c=t[1],f=t[t.length-1],h=t[t.length-2];n===!1?(H(a),H(u)):ar(a,o)&&(n?(H(o),H(c)):(H(a),H(u))),i===!1?(H(s),H(f)):ar(l,s)&&(i?(H(l),H(h)):(H(s),H(f)))}}function H(r){r&&(r.ignore=!0)}function ar(r,e){var t=r&&r.getBoundingRect().clone(),n=e&&e.getBoundingRect().clone();if(!(!t||!n)){var i=ai([]);return Qr(i,i,-r.rotation),t.applyTransform(Ge([],i,r.getLocalTransform())),n.applyTransform(Ge([],i,e.getLocalTransform())),t.intersect(n)}}function or(r){return r==="middle"||r==="center"}function yn(r,e,t,n,i){for(var a=[],o=[],s=[],l=0;l<r.length;l++){var u=r[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=t,e&&(mt(o,o,e),mt(s,s,e));var c=new kt({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});Rt(c.shape,c.style.lineWidth),c.anid=i+"_"+r[l].tickValue,a.push(c)}return a}function Ia(r,e,t,n){var i=t.axis,a=t.getModel("axisTick"),o=a.get("show");if(o==="auto"&&n.handleAutoShown&&(o=n.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=n.tickDirection*a.get("length"),u=i.getTicksCoords(),c=yn(u,e.transform,l,V(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)r.add(c[f]);return c}}function La(r,e,t,n){var i=t.axis,a=t.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=n*a.get("length"),u=V(s.getLineStyle(),V(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var f=yn(o[c],e.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)r.add(f[h])}}function Pa(r,e,t,n){var i=t.axis,a=Mt(n.axisLabelShow,t.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),u=(Mt(n.labelRotate,o.get("rotate"))||0)*it/180,c=ut.innerTextLayout(n.rotation,u,n.labelDirection),f=t.getCategories&&t.getCategories(!0),h=[],d=ut.isLabelSilent(t),v=t.get("triggerEvent");return _(l,function(p,g){var y=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(p.tickValue):p.tickValue,x=p.formattedLabel,m=p.rawLabel,b=o;if(f&&f[y]){var w=f[y];j(w)&&w.textStyle&&(b=new nt(w.textStyle,o,t.ecModel))}var C=b.getTextColor()||t.get(["axisLine","lineStyle","color"]),A=i.dataToCoord(y),S=new $({x:A,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(p.level||0),style:_t(b,{text:x,align:b.getShallow("align",!0)||c.textAlign,verticalAlign:b.getShallow("verticalAlign",!0)||b.getShallow("baseline",!0)||c.textVerticalAlign,fill:U(C)?C(i.type==="category"?m:i.type==="value"?y+"":y,g):C})});if(S.anid="label_"+y,v){var T=ut.makeAxisEventDataBase(t);T.targetType="axisLabel",T.value=m,T.tickIndex=g,i.type==="category"&&(T.dataIndex=y),Y(S).eventData=T}e.add(S),S.updateTransform(),h.push(S),r.add(S),S.decomposeTransform()}),h}}const mn=ut;function Da(r,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Oa(t,r,e),t.seriesInvolved&&Ra(t,r),t}function Oa(r,e,t){var n=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];_(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=It(s.model),u=r.coordSysAxesInfo[l]={};r.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if(_(s.getAxes(),L(p,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",v=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&_(v.baseAxes,L(p,d?"cross":!0,h)),d&&_(v.otherAxes,L(p,"cross",!1))}function p(g,y,x){var m=x.model.getModel("axisPointer",i),b=m.get("show");if(!(!b||b==="auto"&&!g&&!se(m))){y==null&&(y=m.get("triggerTooltip")),m=g?ka(x,f,i,e,g,y):m;var w=m.get("snap"),C=It(x.model),A=y||w||x.type==="category",S=r.axesInfo[C]={key:C,axis:x,coordSys:s,axisPointerModel:m,triggerTooltip:y,involveSeries:A,snap:w,useHandle:se(m),seriesModels:[],linkGroup:null};u[C]=S,r.seriesInvolved=r.seriesInvolved||A;var T=Ba(a,x);if(T!=null){var I=o[T]||(o[T]={axesInfo:{}});I.axesInfo[C]=S,I.mapper=a[T].mapper,S.linkGroup=I}}}})}function ka(r,e,t,n,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};_(s,function(h){l[h]=W(o.get(h))}),l.snap=r.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=o.get(["label","show"]);if(u.show=c??!0,!a){var f=l.lineStyle=o.get("crossStyle");f&&V(u,f.textStyle)}}return r.model.getModel("axisPointer",new nt(l,t,n))}function Ra(r,e){e.eachSeries(function(t){var n=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||_(r.coordSysAxesInfo[It(n.model)],function(o){var s=o.axis;n.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function Ba(r,e){for(var t=e.model,n=e.dim,i=0;i<r.length;i++){var a=r[i]||{};if(Yt(a[n+"AxisId"],t.id)||Yt(a[n+"AxisIndex"],t.componentIndex)||Yt(a[n+"AxisName"],t.name))return i}}function Yt(r,e){return r==="all"||R(r)&&N(r,e)>=0||r===e}function Ea(r){var e=Ie(r);if(e){var t=e.axisPointerModel,n=e.axis.scale,i=t.option,a=t.get("status"),o=t.get("value");o!=null&&(o=n.parse(o));var s=se(t);a==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function Ie(r){var e=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[It(r)]}function za(r){var e=Ie(r);return e&&e.axisPointerModel}function se(r){return!!r.get(["handle","show"])}function It(r){return r.type+"||"+r.id}var sr={},Va=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,i,a){this.axisPointerClass&&Ea(t),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,n,i,a){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,n){var i=this._axisPointer;i&&i.remove(n)},e.prototype.dispose=function(t,n){this._disposeAxisPointer(n),r.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,n,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=za(t);o?(this._axisPointer||(this._axisPointer=new a)).render(t,o,n,i):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,n){sr[t]=n},e.getAxisPointerClass=function(t){return t&&sr[t]},e.type="axis",e}(et);const xn=Va;var le=Pt();function Ga(r,e,t,n){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var c=s.length,f=le(r).splitAreaColors,h=J(),d=0;if(f)for(var v=0;v<u.length;v++){var p=f.get(u[v].tickValue);if(p!=null){d=(p+(c-1)*v)%c;break}}var g=i.toGlobalCoord(u[0].coord),y=o.getAreaStyle();s=R(s)?s:[s];for(var v=1;v<u.length;v++){var x=i.toGlobalCoord(u[v].coord),m=void 0,b=void 0,w=void 0,C=void 0;i.isHorizontal()?(m=g,b=l.y,w=x-m,C=l.height,g=m+w):(m=l.x,b=g,w=l.width,C=x-b,g=b+C);var A=u[v-1].tickValue;A!=null&&h.set(A,d),e.add(new Q({anid:A!=null?"area_"+A:null,shape:{x:m,y:b,width:w,height:C},style:V({fill:s[d]},y),autoBatch:!0,silent:!0})),d=(d+1)%c}le(r).splitAreaColors=h}}}function Ha(r){le(r).splitAreaColors=null}var Na=["axisLine","axisTickLabel","axisName"],Wa=["splitArea","splitLine","minorSplitLine"],_n=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,n,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new q,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),l=oe(s,t),u=new mn(t,ot({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(re(h[d].getOtherAxis(t.axis).scale))return!0;return!1}},l));_(Na,u.add,u),this._axisGroup.add(u.getGroup()),_(Wa,function(f){t.get([f,"show"])&&Za[f](this,this._axisGroup,t,s)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||oi(o,this._axisGroup,t),r.prototype.render.call(this,t,n,i,a)}},e.prototype.remove=function(){Ha(this)},e.type="cartesianAxis",e}(xn),Za={splitLine:function(r,e,t,n){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=R(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:a}),h=[],d=[],v=o.getLineStyle(),p=0;p<f.length;p++){var g=i.toGlobalCoord(f[p].coord);u?(h[0]=g,h[1]=l.y,d[0]=g,d[1]=l.y+l.height):(h[0]=l.x,h[1]=g,d[0]=l.x+l.width,d[1]=g);var y=c++%s.length,x=f[p].tickValue,m=new kt({anid:x!=null?"line_"+f[p].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:V({stroke:s[y]},v),silent:!0});Rt(m.shape,v.lineWidth),e.add(m)}}},minorSplitLine:function(r,e,t,n){var i=t.axis,a=t.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var c=[],f=[],h=o.getLineStyle(),d=0;d<u.length;d++)for(var v=0;v<u[d].length;v++){var p=i.toGlobalCoord(u[d][v].coord);l?(c[0]=p,c[1]=s.y,f[0]=p,f[1]=s.y+s.height):(c[0]=s.x,c[1]=p,f[0]=s.x+s.width,f[1]=p);var g=new kt({anid:"minor_line_"+u[d][v].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});Rt(g.shape,h.lineWidth),e.add(g)}},splitArea:function(r,e,t,n){Ga(r,e,t,n)}},bn=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(_n),Fa=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=bn.type,t}return e.type="yAxis",e}(_n),$a=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,n){this.group.removeAll(),t.get("show")&&this.group.add(new Q({shape:t.coordinateSystem.getRect(),style:V({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(et),lr={offset:0};function Ya(r){r.registerComponentView($a),r.registerComponentModel(fa),r.registerCoordinateSystem("cartesian2d",Sa),qe(r,"x",ie,lr),qe(r,"y",ie,lr),r.registerComponentView(bn),r.registerComponentView(Fa),r.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var lt=Pt(),ur=W,Ut=Z,Ua=function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(e,t,n,i){var a=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,e,t,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new q,this.createPointerEl(s,u,e,t),this.createLabelEl(s,u,e,t),n.getZr().add(s);else{var h=L(cr,t,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,t)}hr(s,t,!0),this._renderHandle(a)}},r.prototype.remove=function(e){this.clear(e)},r.prototype.dispose=function(e){this.clear(e)},r.prototype.determineAnimation=function(e,t){var n=t.get("animation"),i=e.axis,a=i.type==="category",o=t.get("snap");if(!o&&!a)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=Ie(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},r.prototype.makeElOption=function(e,t,n,i,a){},r.prototype.createPointerEl=function(e,t,n,i){var a=t.pointer;if(a){var o=lt(e).pointerEl=new si[a.type](ur(t.pointer));e.add(o)}},r.prototype.createLabelEl=function(e,t,n,i){if(t.label){var a=lt(e).labelEl=new $(ur(t.label));e.add(a),fr(a,i)}},r.prototype.updatePointerEl=function(e,t,n){var i=lt(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),n(i,{shape:t.pointer.shape}))},r.prototype.updateLabelEl=function(e,t,n,i){var a=lt(e).labelEl;a&&(a.setStyle(t.label.style),n(a,{x:t.label.x,y:t.label.y}),fr(a,i))},r.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,n=this._api.getZr(),i=this._handle,a=t.getModel("handle"),o=t.get("status");if(!a.get("show")||!o||o==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=Se(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){ta(u.event)},onmousedown:Ut(this._onHandleDragMove,this,0,0),drift:Ut(this._onHandleDragMove,this),ondragend:Ut(this._onHandleDragEnd,this)}),n.add(i)),hr(i,t,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");R(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,vn(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},r.prototype._moveHandleToValue=function(e,t){cr(this._axisPointerModel,!t&&this._moveAnimation,this._handle,Xt(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(e,t){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(Xt(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(Xt(i)),lt(n).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,i=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),ne(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(e,t,n){return n=n||0,{x:e[n],y:e[1-n],width:t[n],height:t[1-n]}},r}();function cr(r,e,t,n){wn(lt(t).lastProp,n)||(lt(t).lastProp=n,e?en(t,n,r):(t.stopAnimation(),t.attr(n)))}function wn(r,e){if(j(r)&&j(e)){var t=!0;return _(e,function(n,i){t=t&&wn(r[i],n)}),!!t}else return r===e}function fr(r,e){r[e.get(["label","show"])?"show":"hide"]()}function Xt(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function hr(r,e,t){var n=e.get("z"),i=e.get("zlevel");r&&r.traverse(function(a){a.type!=="group"&&(n!=null&&(a.z=n),i!=null&&(a.zlevel=i),a.silent=t)})}const Xa=Ua;function Ka(r){var e=r.get("type"),t=r.getModel(e+"Style"),n;return e==="line"?(n=t.getLineStyle(),n.fill=null):e==="shadow"&&(n=t.getAreaStyle(),n.stroke=null),n}function ja(r,e,t,n,i){var a=t.get("value"),o=Cn(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=Te(s.get("padding")||0),u=s.getFont(),c=rn(o,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],v=i.align;v==="right"&&(f[0]-=h),v==="center"&&(f[0]-=h/2);var p=i.verticalAlign;p==="bottom"&&(f[1]-=d),p==="middle"&&(f[1]-=d/2),qa(f,h,d,n);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=e.get(["axisLine","lineStyle","color"])),r.label={x:f[0],y:f[1],style:_t(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function qa(r,e,t,n){var i=n.getWidth(),a=n.getHeight();r[0]=Math.min(r[0]+e,i)-e,r[1]=Math.min(r[1]+t,a)-t,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function Cn(r,e,t,n,i){r=e.scale.parse(r);var a=e.scale.getLabel({value:r},{precision:i.precision}),o=i.formatter;if(o){var s={value:dn(e,{value:r}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};_(n,function(l){var u=t.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),D(o)?a=o.replace("{value}",a):U(o)&&(a=o(s))}return a}function An(r,e,t){var n=ci();return Qr(n,n,t.rotation),li(n,n,t.position),ui([r.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],n)}function Ja(r,e,t,n,i,a){var o=mn.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),ja(e,n,i,a,{position:An(n.axis,r,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function Qa(r,e,t){return t=t||0,{x1:r[t],y1:r[1-t],x2:e[t],y2:e[1-t]}}function to(r,e,t){return t=t||0,{x:r[t],y:r[1-t],width:e[t],height:e[1-t]}}var eo=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,n,i,a,o){var s=i.axis,l=s.grid,u=a.get("type"),c=dr(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=Ka(a),d=ro[u](s,f,c);d.style=h,t.graphicKey=d.type,t.pointer=d}var v=oe(l.model,i);Ja(n,t,v,i,a,o)},e.prototype.getHandleTransform=function(t,n,i){var a=oe(n.axis.grid.model,n,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=An(n.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,n,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),u=dr(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,f=[t.x,t.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var v=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:t.rotation,cursorPoint:d,tooltipOption:v[c]}},e}(Xa);function dr(r,e){var t={};return t[e.dim+"AxisIndex"]=e.index,r.getCartesian(t)}var ro={line:function(r,e,t){var n=Qa([e,t[0]],[e,t[1]],vr(r));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(r,e,t){var n=Math.max(1,r.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:to([e-n/2,t[0]],[n,i],vr(r))}}};function vr(r){return r.dim==="x"?0:1}const no=eo;var io=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(tt);const ao=io;var K=Pt(),oo=_;function Sn(r,e,t){if(!z.node){var n=e.getZr();K(n).records||(K(n).records={}),so(n,e);var i=K(n).records[r]||(K(n).records[r]={});i.handler=t}}function so(r,e){if(K(r).initialized)return;K(r).initialized=!0,t("click",L(pr,"click")),t("mousemove",L(pr,"mousemove")),t("globalout",uo);function t(n,i){r.on(n,function(a){var o=co(e);oo(K(r).records,function(s){s&&i(s,a,o.dispatchAction)}),lo(o.pendings,e)})}}function lo(r,e){var t=r.showTip.length,n=r.hideTip.length,i;t?i=r.showTip[t-1]:n&&(i=r.hideTip[n-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function uo(r,e,t){r.handler("leave",null,t)}function pr(r,e,t,n){e.handler(r,t,n)}function co(r){var e={showTip:[],hideTip:[]},t=function(n){var i=e[n.type];i?i.push(n):(n.dispatchAction=t,r.dispatchAction(n))};return{dispatchAction:t,pendings:e}}function ue(r,e){if(!z.node){var t=e.getZr(),n=(K(t).records||{})[r];n&&(K(t).records[r]=null)}}var fo=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,i){var a=n.getComponent("tooltip"),o=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Sn("axisPointer",i,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,n){ue("axisPointer",n)},e.prototype.dispose=function(t,n){ue("axisPointer",n)},e.type="axisPointer",e}(et);const ho=fo;function Tn(r,e){var t=[],n=r.seriesIndex,i;if(n==null||!(i=e.getSeriesByIndex(n)))return{point:[]};var a=i.getData(),o=fi(a,r);if(o==null||o<0||R(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(r.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,v=a.mapDimension(h),p=[];p[d]=a.get(v,o),p[1-d]=a.get(a.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(p)||[]}else t=l.dataToPoint(a.getValues(B(l.dimensions,function(y){return a.mapDimension(y)}),o))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),t=[g.x+g.width/2,g.y+g.height/2]}return{point:t,el:s}}var gr=Pt();function vo(r,e,t){var n=r.currTrigger,i=[r.x,r.y],a=r,o=r.dispatchAction||Z(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){Ot(i)&&(i=Tn({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=Ot(i),u=a.axesInfo,c=s.axesInfo,f=n==="leave"||Ot(i),h={},d={},v={list:[],map:{}},p={showPointer:L(go,d),showTooltip:L(yo,v)};_(s.coordSysMap,function(y,x){var m=l||y.containPoint(i);_(s.coordSysAxesInfo[x],function(b,w){var C=b.axis,A=bo(u,b);if(!f&&m&&(!u||A)){var S=A&&A.value;S==null&&!l&&(S=C.pointToData(i)),S!=null&&yr(b,S,p,!1,h)}})});var g={};return _(c,function(y,x){var m=y.linkGroup;m&&!d[x]&&_(m.axesInfo,function(b,w){var C=d[w];if(b!==y&&C){var A=C.value;m.mapper&&(A=y.axis.scale.parse(m.mapper(A,mr(b),mr(y)))),g[y.key]=A}})}),_(g,function(y,x){yr(c[x],y,p,!0,h)}),mo(d,c,h),xo(v,i,r,o),_o(c,o,t),h}}function yr(r,e,t,n,i){var a=r.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!r.involveSeries){t.showPointer(r,e);return}var o=po(e,r),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&ot(i,s[0]),!n&&r.snap&&a.containData(l)&&l!=null&&(e=l),t.showPointer(r,e,s),t.showTooltip(r,o,l)}}function po(r,e){var t=e.axis,n=t.dim,i=r,a=[],o=Number.MAX_VALUE,s=-1;return _(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,r,t);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],r,t.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var v=r-f,p=Math.abs(v);p<=o&&((p<o||v>=0&&s<0)&&(o=p,s=v,i=f,a.length=0),_(h,function(g){a.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:a,snapToValue:i}}function go(r,e,t,n){r[e.key]={value:t,payloadBatch:n}}function yo(r,e,t,n){var i=t.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=It(l),c=r.map[u];c||(c=r.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},r.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function mo(r,e,t){var n=t.axesInfo=[];_(e,function(i,a){var o=i.axisPointerModel.option,s=r[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function xo(r,e,t,n){if(Ot(e)||!r.list.length){n({type:"hideTip"});return}var i=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:r.list})}function _o(r,e,t){var n=t.getZr(),i="axisPointerLastHighlights",a=gr(n)[i]||{},o=gr(n)[i]={};_(r,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&_(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;o[d]=h})});var s=[],l=[];_(a,function(u,c){!o[c]&&l.push(u)}),_(o,function(u,c){!a[c]&&s.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function bo(r,e){for(var t=0;t<(r||[]).length;t++){var n=r[t];if(e.axis.dim===n.axisDim&&e.axis.model.componentIndex===n.axisIndex)return n}}function mr(r){var e=r.axis.model,t={},n=t.axisDim=r.axis.dim;return t.axisIndex=t[n+"AxisIndex"]=e.componentIndex,t.axisName=t[n+"AxisName"]=e.name,t.axisId=t[n+"AxisId"]=e.id,t}function Ot(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function Mn(r){xn.registerAxisPointerClass("CartesianAxisPointer",no),r.registerComponentModel(ao),r.registerComponentView(ho),r.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!R(t)&&(e.axisPointer.link=[t])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=Da(e,t)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},vo)}function wo(r){ct(Ya),ct(Mn)}var xr="\0_ec_interaction_mutex";function Co(r,e,t){var n=In(r);n[e]=t}function Ao(r,e,t){var n=In(r),i=n[e];i===t&&(n[e]=null)}function In(r){return r[xr]||(r[xr]={})}Vt({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},ee);var So={axisPointer:1,tooltip:1,brush:1};function To(r,e,t){var n=e.getComponentByElement(r.topTarget),i=n&&n.coordinateSystem;return n&&n!==t&&!So.hasOwnProperty(n.mainType)&&i&&i.model!==t}function Ln(r,e,t,n,i,a){r=r||0;var o=t[1]-t[0];if(i!=null&&(i=dt(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),n==="all"){var s=Math.abs(e[1]-e[0]);s=dt(s,[0,o]),i=a=dt(s,[i,a]),n=0}e[0]=dt(e[0],t),e[1]=dt(e[1],t);var l=Kt(e,n);e[n]+=r;var u=i||0,c=t.slice();l.sign<0?c[0]+=u:c[1]-=u,e[n]=dt(e[n],c);var f;return f=Kt(e,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(e[1-n]=e[n]+l.sign*i),f=Kt(e,n),a!=null&&f.span>a&&(e[1-n]=e[n]+f.sign*a),e}function Kt(r,e){var t=r[e]-r[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function dt(r,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,r))}var ft=!0,Lt=Math.min,bt=Math.max,Mo=Math.pow,Io=1e4,Lo=6,Po=6,_r="globalPan",Do={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Oo={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},br={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},ko=0,Ro=function(r){M(e,r);function e(t){var n=r.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new q,n._uid="brushController_"+ko++,_(No,function(i,a){this._handlers[a]=Z(i,this)},n),n}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var n=this._zr;this._enableGlobalPan||Co(n,_r,this._uid),_(this._handlers,function(i,a){n.on(a,i)}),this._brushType=t.brushType,this._brushOption=k(W(br),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Ao(t,_r,this._uid),_(this._handlers,function(n,i){t.off(i,n)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var n=this._panels={};_(t,function(i){n[i.panelId]=W(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=n.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=B(t,function(h){return k(W(br),h,!0)});var n="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new nn(i,t,u,l).add(c).update(c).remove(f).execute(),this;function l(h,d){return(h.id!=null?h.id:n+d)+"-"+h.brushType}function u(h,d){return l(h.__brushOption,d)}function c(h,d){var v=t[h];if(d!=null&&i[d]===s)a[h]=i[d];else{var p=a[h]=d!=null?(i[d].__brushOption=v,i[d]):Dn(o,Pn(o,v));Le(o,p)}}function f(h){i[h]!==s&&o.group.remove(i[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),ce(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(hi);function Pn(r,e){var t=Gt[e.brushType].createCover(r,e);return t.__brushOption=e,kn(t,e),r.group.add(t),t}function Dn(r,e){var t=Pe(e);return t.endCreating&&(t.endCreating(r,e),kn(e,e.__brushOption)),e}function On(r,e){var t=e.__brushOption;Pe(e).updateCoverShape(r,e,t.range,t)}function kn(r,e){var t=e.z;t==null&&(t=Io),r.traverse(function(n){n.z=t,n.z2=t})}function Le(r,e){Pe(e).updateCommon(r,e),On(r,e)}function Pe(r){return Gt[r.__brushOption.brushType]}function De(r,e,t){var n=r._panels;if(!n)return ft;var i,a=r._transform;return _(n,function(o){o.isTargetByCursor(e,t,a)&&(i=o)}),i}function Rn(r,e){var t=r._panels;if(!t)return ft;var n=e.__brushOption.panelId;return n!=null?t[n]:ft}function ce(r){var e=r._covers,t=e.length;return _(e,function(n){r.group.remove(n)},r),e.length=0,!!t}function ht(r,e){var t=B(r._covers,function(n){var i=n.__brushOption,a=W(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});r.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Bo(r){var e=r._track;if(!e.length)return!1;var t=e[e.length-1],n=e[0],i=t[0]-n[0],a=t[1]-n[1],o=Mo(i*i+a*a,.5);return o>Lo}function Bn(r){var e=r.length-1;return e<0&&(e=0),[r[0],r[e]]}function En(r,e,t,n){var i=new q;return i.add(new Q({name:"main",style:Oe(t),silent:!0,draggable:!0,cursor:"move",drift:L(wr,r,e,i,["n","s","w","e"]),ondragend:L(ht,e,{isEnd:!0})})),_(n,function(a){i.add(new Q({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:L(wr,r,e,i,a),ondragend:L(ht,e,{isEnd:!0})}))}),i}function zn(r,e,t,n){var i=n.brushStyle.lineWidth||0,a=bt(i,Po),o=t[0][0],s=t[1][0],l=o-i/2,u=s-i/2,c=t[0][1],f=t[1][1],h=c-a+i/2,d=f-a+i/2,v=c-o,p=f-s,g=v+i,y=p+i;X(r,e,"main",o,s,v,p),n.transformable&&(X(r,e,"w",l,u,a,y),X(r,e,"e",h,u,a,y),X(r,e,"n",l,u,g,a),X(r,e,"s",l,d,g,a),X(r,e,"nw",l,u,a,a),X(r,e,"ne",h,u,a,a),X(r,e,"sw",l,d,a,a),X(r,e,"se",h,d,a,a))}function fe(r,e){var t=e.__brushOption,n=t.transformable,i=e.childAt(0);i.useStyle(Oe(t)),i.attr({silent:!n,cursor:n?"move":"default"}),_([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?he(r,a[0]):zo(r,a);o&&o.attr({silent:!n,invisible:!n,cursor:n?Oo[s]+"-resize":null})})}function X(r,e,t,n,i,a,o){var s=e.childOfName(t);s&&s.setShape(Go(ke(r,e,[[n,i],[n+a,i+o]])))}function Oe(r){return V({strokeNoScale:!0},r.brushStyle)}function Vn(r,e,t,n){var i=[Lt(r,t),Lt(e,n)],a=[bt(r,t),bt(e,n)];return[[i[0],a[0]],[i[1],a[1]]]}function Eo(r){return an(r.group)}function he(r,e){var t={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},i=pi(t[e],Eo(r));return n[i]}function zo(r,e){var t=[he(r,e[0]),he(r,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function wr(r,e,t,n,i,a){var o=t.__brushOption,s=r.toRectRange(o.range),l=Gn(e,i,a);_(n,function(u){var c=Do[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=r.fromRectRange(Vn(s[0][0],s[1][0],s[0][1],s[1][1])),Le(e,t),ht(e,{isEnd:!1})}function Vo(r,e,t,n){var i=e.__brushOption.range,a=Gn(r,t,n);_(i,function(o){o[0]+=a[0],o[1]+=a[1]}),Le(r,e),ht(r,{isEnd:!1})}function Gn(r,e,t){var n=r.group,i=n.transformCoordToLocal(e,t),a=n.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function ke(r,e,t){var n=Rn(r,e);return n&&n!==ft?n.clipPath(t,r._transform):W(t)}function Go(r){var e=Lt(r[0][0],r[1][0]),t=Lt(r[0][1],r[1][1]),n=bt(r[0][0],r[1][0]),i=bt(r[0][1],r[1][1]);return{x:e,y:t,width:n-e,height:i-t}}function Ho(r,e,t){if(!(!r._brushType||Wo(r,e.offsetX,e.offsetY))){var n=r._zr,i=r._covers,a=De(r,e,t);if(!r._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===ft||s.panelId===a.panelId)&&Gt[s.brushType].contain(i[o],t[0],t[1]))return}a&&n.setCursorStyle("crosshair")}}function de(r){var e=r.event;e.preventDefault&&e.preventDefault()}function ve(r,e,t){return r.childOfName("main").contain(e,t)}function Hn(r,e,t,n){var i=r._creatingCover,a=r._creatingPanel,o=r._brushOption,s;if(r._track.push(t.slice()),Bo(r)||i){if(a&&!i){o.brushMode==="single"&&ce(r);var l=W(o);l.brushType=Cr(l.brushType,a),l.panelId=a===ft?null:a.panelId,i=r._creatingCover=Pn(r,l),r._covers.push(i)}if(i){var u=Gt[Cr(r._brushType,a)],c=i.__brushOption;c.range=u.getCreatingRange(ke(r,i,r._track)),n&&(Dn(r,i),u.updateCommon(r,i)),On(r,i),s={isEnd:n}}}else n&&o.brushMode==="single"&&o.removeOnClick&&De(r,e,t)&&ce(r)&&(s={isEnd:n,removeOnClick:!0});return s}function Cr(r,e){return r==="auto"?e.defaultBrushType:r}var No={mousedown:function(r){if(this._dragging)Ar(this,r);else if(!r.target||!r.target.draggable){de(r);var e=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var t=this._creatingPanel=De(this,r,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(r){var e=r.offsetX,t=r.offsetY,n=this.group.transformCoordToLocal(e,t);if(Ho(this,r,n),this._dragging){de(r);var i=Hn(this,r,n,!1);i&&ht(this,i)}},mouseup:function(r){Ar(this,r)}};function Ar(r,e){if(r._dragging){de(e);var t=e.offsetX,n=e.offsetY,i=r.group.transformCoordToLocal(t,n),a=Hn(r,e,i,!0);r._dragging=!1,r._track=[],r._creatingCover=null,a&&ht(r,a)}}function Wo(r,e,t){var n=r._zr;return e<0||e>n.getWidth()||t<0||t>n.getHeight()}var Gt={lineX:Sr(0),lineY:Sr(1),rect:{createCover:function(r,e){function t(n){return n}return En({toRectRange:t,fromRectRange:t},r,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var e=Bn(r);return Vn(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(r,e,t,n){zn(r,e,t,n)},updateCommon:fe,contain:ve},polygon:{createCover:function(r,e){var t=new q;return t.add(new di({name:"main",style:Oe(e),silent:!0})),t},getCreatingRange:function(r){return r},endCreating:function(r,e){e.remove(e.childAt(0)),e.add(new vi({name:"main",draggable:!0,drift:L(Vo,r,e),ondragend:L(ht,r,{isEnd:!0})}))},updateCoverShape:function(r,e,t,n){e.childAt(0).setShape({points:ke(r,e,t)})},updateCommon:fe,contain:ve}};function Sr(r){return{createCover:function(e,t){return En({toRectRange:function(n){var i=[n,[0,100]];return r&&i.reverse(),i},fromRectRange:function(n){return n[r]}},e,t,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(e){var t=Bn(e),n=Lt(t[0][r],t[1][r]),i=bt(t[0][r],t[1][r]);return[n,i]},updateCoverShape:function(e,t,n,i){var a,o=Rn(e,t);if(o!==ft&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(r);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-r]]}var l=[n,a];r&&l.reverse(),zn(e,t,l,i)},updateCommon:fe,contain:ve}}const Zo=Ro;function Fo(r){return r=Re(r),function(e){return gi(e,r)}}function $o(r,e){return r=Re(r),function(t){var n=e??t,i=n?r.width:r.height,a=n?r.x:r.y;return[a,a+(i||0)]}}function Yo(r,e,t){var n=Re(r);return function(i,a){return n.contain(a[0],a[1])&&!To(i,e,t)}}function Re(r){return te.create(r)}var Tr=["x","y","radius","angle","single"],Uo=["cartesian2d","polar","singleAxis"];function Xo(r){var e=r.get("coordinateSystem");return N(Uo,e)>=0}function gt(r){return r+"Axis"}function Ko(r,e){var t=J(),n=[],i=J();r.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||s(c)});var a;do a=!1,r.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&l(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),n.push(c),u(c)}function l(c){var f=!1;return c.eachTargetAxis(function(h,d){var v=t.get(h);v&&v[d]&&(f=!0)}),f}function u(c){c.eachTargetAxis(function(f,h){(t.get(f)||t.set(f,[]))[h]=!0})}return n}var jt=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},r}(),jo=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,n,i){var a=Mr(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var n=Mr(t);k(this.option,t,!0),k(this.settledOption,n,!0),this._doInit(n)},e.prototype._doInit=function(t){var n=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;_([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(n[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),n=this._targetAxisInfoMap=J(),i=this._fillSpecifiedTargetAxis(n);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var n=!1;return _(Tr,function(i){var a=this.getReferringComponents(gt(i),yi);if(a.specified){n=!0;var o=new jt;_(a.models,function(s){o.add(s.componentIndex)}),t.set(i,o)}},this),n},e.prototype._fillAutoTargetAxisByOrient=function(t,n){var i=this.ecModel,a=!0;if(a){var o=n==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===n}});l(s,"single")}function l(u,c){var f=u[0];if(f){var h=new jt;if(h.add(f.componentIndex),t.set(c,h),a=!1,c==="x"||c==="y"){var d=f.getReferringComponents("grid",at).models[0];d&&_(u,function(v){f.componentIndex!==v.componentIndex&&d===v.getReferringComponents("grid",at).models[0]&&h.add(v.componentIndex)})}}}a&&_(Tr,function(u){if(a){var c=i.findComponents({mainType:gt(u),filter:function(h){return h.get("type",!0)==="category"}});if(c[0]){var f=new jt;f.add(c[0].componentIndex),t.set(u,f),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(n){!t&&(t=n)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var n=this._rangePropMode,i=this.get("rangeMode");_([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,l=t[a[1]]!=null;s&&!l?n[o]="percent":!s&&l?n[o]="value":i?n[o]=i[o]:s&&(n[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(n,i){t==null&&(t=this.ecModel.getComponent(gt(n),i))},this),t},e.prototype.eachTargetAxis=function(t,n){this._targetAxisInfoMap.each(function(i,a){_(i.indexList,function(o){t.call(n,a,o)})})},e.prototype.getAxisProxy=function(t,n){var i=this.getAxisModel(t,n);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,n){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[n])return this.ecModel.getComponent(gt(t),n)},e.prototype.setRawRange=function(t){var n=this.option,i=this.settledOption;_([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(n[a[0]]=i[a[0]]=t[a[0]],n[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var n=this.option;_(["start","startValue","end","endValue"],function(i){n[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,n){if(t==null&&n==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,n).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var n,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;n||(n=u)}return n},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(tt);function Mr(r){var e={};return _(["start","end","startValue","endValue","throttle"],function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}),e}const qo=jo;var Jo=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(qo);const Qo=Jo;var ts=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,i,a){this.dataZoomModel=t,this.ecModel=n,this.api=i},e.type="dataZoom",e}(et);const es=ts;var rs=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(es);const ns=rs;var pt=_,Ir=xi,is=function(){function r(e,t,n,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=n}return r.prototype.hostedBy=function(e){return this._dataZoomModel===e},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(Xo(t)){var n=gt(this._dimName),i=t.getReferringComponents(n,at).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return W(this._minMaxSpan)},r.prototype.calculateDataWindow=function(e){var t=this._dataExtent,n=this.getAxisModel(),i=n.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;pt(["start","end"],function(h,d){var v=e[h],p=e[h+"Value"];a[d]==="percent"?(v==null&&(v=o[d]),p=i.parse(Ct(v,o,t))):(u=!0,p=p==null?t[d]:i.parse(p),v=Ct(p,t,o)),l[d]=p==null||isNaN(p)?t[d]:p,s[d]=v==null||isNaN(v)?o[d]:v}),Ir(l),Ir(s);var c=this._minMaxSpan;u?f(l,s,t,o,!1):f(s,l,o,t,!0);function f(h,d,v,p,g){var y=g?"Span":"ValueSpan";Ln(0,h,v,"all",c["min"+y],c["max"+y]);for(var x=0;x<2;x++)d[x]=Ct(h[x],v,p,!0),g&&(d[x]=i.parse(d[x]))}return{valueWindow:l,percentWindow:s}},r.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=as(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var n=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;pt(i,function(l){var u=l.getData(),c=u.mapDimensionsAll(n);if(c.length){if(a==="weakFilter"){var f=u.getStore(),h=B(c,function(d){return u.getDimensionIndex(d)},u);u.filterSelf(function(d){for(var v,p,g,y=0;y<c.length;y++){var x=f.get(h[y],d),m=!isNaN(x),b=x<o[0],w=x>o[1];if(m&&!b&&!w)return!0;m&&(g=!0),b&&(v=!0),w&&(p=!0)}return g&&v&&p})}else pt(c,function(d){if(a==="empty")l.setData(u=u.map(d,function(p){return s(p)?p:NaN}));else{var v={};v[d]=o,u.selectRange(v)}});pt(c,function(d){u.setApproximateExtent(o,d)})}});function s(l){return l>=o[0]&&l<=o[1]}},r.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;pt(["min","max"],function(i){var a=t.get(i+"Span"),o=t.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=Ct(n[0]+o,n,[0,100],!0):a!=null&&(o=Ct(a,[0,100],n,!0)-n[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},r.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var i=mi(n,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+n[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+n[1].toFixed(i)),a.freeze()}},r}();function as(r,e,t){var n=[1/0,-1/0];pt(t,function(o){ea(n,o.getData(),e)});var i=r.getAxisModel(),a=ra(i.axis.scale,i,n).calculate();return[a.min,a.max]}const os=is;var ss={getTargetSeries:function(r){function e(i){r.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=r.getComponent(gt(o),s);i(o,s,l,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var t=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new os(i,a,s,r),t.push(o.__dzAxisProxy))});var n=J();return _(t,function(i){_(i.getTargetSeriesModels(),function(a){n.set(a.uid,a)})}),n},overallReset:function(r,e){r.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(n,i){t.getAxisProxy(n,i).reset(t)}),t.eachTargetAxis(function(n,i){t.getAxisProxy(n,i).filterData(t,e)})}),r.eachComponent("dataZoom",function(t){var n=t.findRepresentativeAxisProxy();if(n){var i=n.getDataPercentWindow(),a=n.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};const ls=ss;function us(r){r.registerAction("dataZoom",function(e,t){var n=Ko(t,e);_(n,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var Lr=!1;function cs(r){Lr||(Lr=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,ls),us(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function fs(r){r.registerComponentModel(Qo),r.registerComponentView(ns),cs(r)}var F=function(){function r(){}return r}(),Nn={};function At(r,e){Nn[r]=e}function Wn(r){return Nn[r]}var hs=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;_(this.option.feature,function(n,i){var a=Wn(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),k(n,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(tt);const ds=hs;function vs(r,e,t){var n=e.getBoxLayoutParams(),i=e.get("padding"),a={width:t.getWidth(),height:t.getHeight()},o=xt(n,a,i);yt(e.get("orient"),r,e.get("itemGap"),o.width,o.height),_i(r,n,a,i)}function Zn(r,e){var t=Te(e.get("padding")),n=e.getItemStyle(["color","opacity"]);return n.fill=e.get("backgroundColor"),r=new Q({shape:{x:r.x-t[3],y:r.y-t[0],width:r.width+t[1]+t[3],height:r.height+t[0]+t[2],r:e.get("borderRadius")},style:n,silent:!0,z2:-1}),r}var ps=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n,i,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",u=t.get("feature")||{},c=this._features||(this._features={}),f=[];_(u,function(v,p){f.push(p)}),new nn(this._featureNames||[],f).add(h).update(h).remove(L(h,null)).execute(),this._featureNames=f;function h(v,p){var g=f[v],y=f[p],x=u[g],m=new nt(x,t,t.ecModel),b;if(a&&a.newTitle!=null&&a.featureName===g&&(x.title=a.newTitle),g&&!y){if(gs(g))b={onclick:m.option.onclick,featureName:g};else{var w=Wn(g);if(!w)return;b=new w}c[g]=b}else if(b=c[y],!b)return;b.uid=bi("toolbox-feature"),b.model=m,b.ecModel=n,b.api=i;var C=b instanceof F;if(!g&&y){C&&b.dispose&&b.dispose(n,i);return}if(!m.get("show")||C&&b.unusable){C&&b.remove&&b.remove(n,i);return}d(m,b,g),m.setIconStatus=function(A,S){var T=this.option,I=this.iconPaths;T.iconStatus=T.iconStatus||{},T.iconStatus[A]=S,I[A]&&(S==="emphasis"?He:Ne)(I[A])},b instanceof F&&b.render&&b.render(m,n,i,a)}function d(v,p,g){var y=v.getModel("iconStyle"),x=v.getModel(["emphasis","iconStyle"]),m=p instanceof F&&p.getIcons?p.getIcons():v.get("icon"),b=v.get("title")||{},w,C;D(m)?(w={},w[g]=m):w=m,D(b)?(C={},C[g]=b):C=b;var A=v.iconPaths={};_(w,function(S,T){var I=Se(S,{},{x:-s/2,y:-s/2,width:s,height:s});I.setStyle(y.getItemStyle());var O=I.ensureState("emphasis");O.style=x.getItemStyle();var E=new $({style:{text:C[T],align:x.get("textAlign"),borderRadius:x.get("textBorderRadius"),padding:x.get("textPadding"),fill:null},ignore:!0});I.setTextContent(E),Ce({el:I,componentModel:t,itemName:T,formatterParamsExtra:{title:C[T]}}),I.__title=C[T],I.on("mouseover",function(){var G=x.getItemStyle(),st=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";E.setStyle({fill:x.get("textFill")||G.fill||G.stroke||"#000",backgroundColor:x.get("textBackgroundColor")}),I.setTextConfig({position:x.get("textPosition")||st}),E.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){v.get(["iconStatus",T])!=="emphasis"&&i.leaveEmphasis(this),E.hide()}),(v.get(["iconStatus",T])==="emphasis"?He:Ne)(I),o.add(I),I.on("click",Z(p.onclick,p,n,i,T)),A[T]=I})}vs(o,t,i),o.add(Zn(o.getBoundingRect(),t)),l||o.eachChild(function(v){var p=v.__title,g=v.ensureState("emphasis"),y=g.textConfig||(g.textConfig={}),x=v.getTextContent(),m=x&&x.ensureState("emphasis");if(m&&!U(m)&&p){var b=m.style||(m.style={}),w=rn(p,$.makeFont(b)),C=v.x+o.x,A=v.y+o.y+s,S=!1;A+w.height>i.getHeight()&&(y.position="top",S=!0);var T=S?-5-w.height:s+10;C+w.width/2>i.getWidth()?(y.position=["100%",T],b.align="right"):C-w.width/2<0&&(y.position=[0,T],b.align="left")}})},e.prototype.updateView=function(t,n,i,a){_(this._features,function(o){o instanceof F&&o.updateView&&o.updateView(o.model,n,i,a)})},e.prototype.remove=function(t,n){_(this._features,function(i){i instanceof F&&i.remove&&i.remove(t,n)}),this.group.removeAll()},e.prototype.dispose=function(t,n){_(this._features,function(i){i instanceof F&&i.dispose&&i.dispose(t,n)})},e.type="toolbox",e}(et);function gs(r){return r.indexOf("my")===0}const ys=ps;var ms=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",o=n.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=n.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),u=z.browser;if(U(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=l;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var h=l.split(","),d=h[0].indexOf("base64")>-1,v=o?decodeURIComponent(h[1]):h[1];d&&(v=window.atob(v));var p=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=v.length,y=new Uint8Array(g);g--;)y[g]=v.charCodeAt(g);var x=new Blob([y]);window.navigator.msSaveOrOpenBlob(x,p)}else{var m=document.createElement("iframe");document.body.appendChild(m);var b=m.contentWindow,w=b.document;w.open("image/svg+xml","replace"),w.write(v),w.close(),b.focus(),w.execCommand("SaveAs",!0,p),document.body.removeChild(m)}}else{var C=i.get("lang"),A='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',S=window.open();S.document.write(A),S.document.title=a}},e.getDefaultOption=function(t){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},e}(F);const xs=ms;var Pr="__ec_magicType_stack__",_s=[["line","bar"],["stack"]],bs=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,n=t.get("icon"),i={};return _(t.get("type"),function(a){n[a]&&(i[a]=n[a])}),i},e.getDefaultOption=function(t){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},e.prototype.onclick=function(t,n,i){var a=this.model,o=a.get(["seriesIndex",i]);if(Dr[i]){var s={series:[]},l=function(f){var h=f.subType,d=f.id,v=Dr[i](h,d,f,a);v&&(V(v,f.option),s.series.push(v));var p=f.coordinateSystem;if(p&&p.type==="cartesian2d"&&(i==="line"||i==="bar")){var g=p.getAxesByScale("ordinal")[0];if(g){var y=g.dim,x=y+"Axis",m=f.getReferringComponents(x,at).models[0],b=m.componentIndex;s[x]=s[x]||[];for(var w=0;w<=b;w++)s[x][b]=s[x][b]||{};s[x][b].boundaryGap=i==="bar"}}};_(_s,function(f){N(f,i)>=0&&_(f,function(h){a.setIconStatus(h,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=i;i==="stack"&&(u=k({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),n.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}(F),Dr={line:function(r,e,t,n){if(r==="bar")return k({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(r,e,t,n){if(r==="line")return k({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(r,e,t,n){var i=t.get("stack")===Pr;if(r==="line"||r==="bar")return n.setIconStatus("stack",i?"normal":"emphasis"),k({id:e,stack:i?"":Pr},n.get(["option","stack"])||{},!0)}};Vt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,e){e.mergeOption(r.newOption)});const ws=bs;var Ht=new Array(60).join("-"),wt="	";function Cs(r){var e={},t=[],n=[];return r.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},n.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:n}}function As(r){var e=[];return _(r,function(t,n){var i=t.categoryAxis,a=t.valueAxis,o=a.dim,s=[" "].concat(B(t.series,function(d){return d.name})),l=[i.model.getCategories()];_(t.series,function(d){var v=d.getRawData();l.push(d.getRawData().mapArray(v.mapDimension(o),function(p){return p}))});for(var u=[s.join(wt)],c=0;c<l[0].length;c++){for(var f=[],h=0;h<l.length;h++)f.push(l[h][c]);u.push(f.join(wt))}e.push(u.join(`
`))}),e.join(`

`+Ht+`

`)}function Ss(r){return B(r,function(e){var t=e.getRawData(),n=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=t.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];n.push((s?s+wt:"")+i.join(wt))}),n.join(`
`)}).join(`

`+Ht+`

`)}function Ts(r){var e=Cs(r);return{value:we([As(e.seriesGroupByCategoryAxis),Ss(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+Ht+`

`),meta:e.meta}}function zt(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ms(r){var e=r.slice(0,r.indexOf(`
`));if(e.indexOf(wt)>=0)return!0}var pe=new RegExp("["+wt+"]+","g");function Is(r){for(var e=r.split(/\n+/g),t=zt(e.shift()).split(pe),n=[],i=B(t,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=zt(e[a]).split(pe);n.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:n}}function Ls(r){for(var e=r.split(/\n+/g),t=zt(e.shift()),n=[],i=0;i<e.length;i++){var a=zt(e[i]);if(a){var o=a.split(pe),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),n[i]={name:s,value:[]},l=n[i].value):l=n[i]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?n[i].value=l[0]:n[i]=l[0])}}return{name:t,data:n}}function Ps(r,e){var t=r.split(new RegExp(`
*`+Ht+`
*`,"g")),n={series:[]};return _(t,function(i,a){if(Ms(i)){var o=Is(i),s=e[a],l=s.axisDim+"Axis";s&&(n[l]=n[l]||[],n[l][s.axisIndex]={data:o.categories},n.series=n.series.concat(o.series))}else{var o=Ls(i);n.series.push(o)}}),n}var Ds=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var i=n.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var f=a.get("optionToContent"),h=a.get("contentToOption"),d=Ts(t);if(U(f)){var v=f(n.getOption());D(v)?u.innerHTML=v:on(v)&&u.appendChild(v)}else{c.readOnly=a.get("readOnly");var p=c.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=a.get("textColor"),p.borderColor=a.get("textareaBorderColor"),p.backgroundColor=a.get("textareaColor"),c.value=d.value,u.appendChild(c)}var g=d.meta,y=document.createElement("div");y.style.cssText="position:absolute;bottom:5px;left:0;right:0";var x="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),b=document.createElement("div");x+=";background-color:"+a.get("buttonColor"),x+=";color:"+a.get("buttonTextColor");var w=this;function C(){i.removeChild(o),w._dom=null}je(m,"click",C),je(b,"click",function(){if(h==null&&f!=null||h!=null&&f==null){C();return}var A;try{U(h)?A=h(u,n.getOption()):A=Ps(c.value,g)}catch(S){throw C(),new Error("Data view format error "+S)}A&&n.dispatchAction({type:"changeDataView",newOption:A}),C()}),m.innerHTML=l[1],b.innerHTML=l[2],b.style.cssText=m.style.cssText=x,!a.get("readOnly")&&y.appendChild(b),y.appendChild(m),o.appendChild(s),o.appendChild(u),o.appendChild(y),u.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(t,n){this._dom&&n.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,n){this.remove(t,n)},e.getDefaultOption=function(t){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},e}(F);function Os(r,e){return B(r,function(t,n){var i=e&&e[n];if(j(i)&&!R(i)){var a=j(t)&&!R(t);a||(t={value:t});var o=i.name!=null&&t.name==null;return t=V(t,i),o&&delete t.name,t}else return t})}Vt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,e){var t=[];_(r.newOption.series,function(n){var i=e.getSeriesByName(n.name)[0];if(!i)t.push(ot({type:"scatter"},n));else{var a=i.get("data");t.push({name:n.name,data:Os(n.data,a)})}}),e.mergeOption(V({series:t},r.newOption))});const ks=Ds;var Fn=_,$n=Pt();function Rs(r,e){var t=Be(r);Fn(e,function(n,i){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[i])break}if(a<0){var s=r.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();t[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),t.push(e)}function Bs(r){var e=Be(r),t=e[e.length-1];e.length>1&&e.pop();var n={};return Fn(t,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){n[a]=i;break}}),n}function Es(r){$n(r).snapshots=null}function zs(r){return Be(r).length}function Be(r){var e=$n(r);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Vs=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){Es(t),n.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return n},e}(F);Vt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,e){e.resetOption("recreate")});const Gs=Vs;var Hs=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Ns=function(){function r(e,t,n){var i=this;this._targetInfoList=[];var a=Or(t,e);_(Ws,function(o,s){(!n||!n.include||N(n.include,s)>=0)&&o(a,i._targetInfoList)})}return r.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(n,i,a){if((n.coordRanges||(n.coordRanges=[])).push(i),!n.coordRange){n.coordRange=i;var o=qt[n.brushType](0,a,i);n.__rangeOffset={offset:Er[n.brushType](o.values,n.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},r.prototype.matchOutputRanges=function(e,t,n){_(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&_(a.coordSyses,function(o){var s=qt[i.brushType](1,o,i.range,!0);n(i,s.values,o,t)})},this)},r.prototype.setInputRanges=function(e,t){_(e,function(n){var i=this.findTargetInfo(n,t);if(n.range=n.range||[],i&&i!==!0){n.panelId=i.panelId;var a=qt[n.brushType](0,i.coordSys,n.coordRange),o=n.__rangeOffset;n.range=o?Er[n.brushType](a.values,o.offset,Zs(a.xyMinMax,o.xyMinMax)):a.values}},this)},r.prototype.makePanelOpts=function(e,t){return B(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:Fo(i),isTargetByCursor:Yo(i,e,n.coordSysModel),getLinearBrushOtherExtent:$o(i)}})},r.prototype.controlSeries=function(e,t,n){var i=this.findTargetInfo(e,n);return i===!0||i&&N(i.coordSyses,t.coordinateSystem)>=0},r.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,i=Or(t,e),a=0;a<n.length;a++){var o=n[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<kr.length;l++)if(kr[l](i,o))return o}return!0},r}();function ge(r){return r[0]>r[1]&&r.reverse(),r}function Or(r,e){return sn(r,e,{includeMainTypes:Hs})}var Ws={grid:function(r,e){var t=r.xAxisModels,n=r.yAxisModels,i=r.gridModels,a=J(),o={},s={};!t&&!n&&!i||(_(t,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),_(n,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),_(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,c=[];_(u.getCartesians(),function(f,h){(N(t,f.getAxis("x").model)>=0||N(n,f.getAxis("y").model)>=0)&&c.push(f)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:Rr.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(r,e){_(r.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:Rr.geo})})}},kr=[function(r,e){var t=r.xAxisModel,n=r.yAxisModel,i=r.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&n&&(i=n.axis.grid.model),i&&i===e.gridModel},function(r,e){var t=r.geoModel;return t&&t===e.geoModel}],Rr={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,e=r.getBoundingRect().clone();return e.applyTransform(an(r)),e}},qt={lineX:L(Br,0),lineY:L(Br,1),rect:function(r,e,t,n){var i=r?e.pointToData([t[0][0],t[1][0]],n):e.dataToPoint([t[0][0],t[1][0]],n),a=r?e.pointToData([t[0][1],t[1][1]],n):e.dataToPoint([t[0][1],t[1][1]],n),o=[ge([i[0],a[0]]),ge([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(r,e,t,n){var i=[[1/0,-1/0],[1/0,-1/0]],a=B(t,function(o){var s=r?e.pointToData(o,n):e.dataToPoint(o,n);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function Br(r,e,t,n){var i=t.getAxis(["x","y"][r]),a=ge(B([0,1],function(s){return e?i.coordToData(i.toLocalCoord(n[s]),!0):i.toGlobalCoord(i.dataToCoord(n[s]))})),o=[];return o[r]=a,o[1-r]=[NaN,NaN],{values:a,xyMinMax:o}}var Er={lineX:L(zr,0),lineY:L(zr,1),rect:function(r,e,t){return[[r[0][0]-t[0]*e[0][0],r[0][1]-t[0]*e[0][1]],[r[1][0]-t[1]*e[1][0],r[1][1]-t[1]*e[1][1]]]},polygon:function(r,e,t){return B(r,function(n,i){return[n[0]-t[0]*e[i][0],n[1]-t[1]*e[i][1]]})}};function zr(r,e,t,n){return[e[0]-n[r]*t[0],e[1]-n[r]*t[1]]}function Zs(r,e){var t=Vr(r),n=Vr(e),i=[t[0]/n[0],t[1]/n[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function Vr(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}const Yn=Ns;var ye=_,Fs=wi("toolbox-dataZoom_"),$s=function(r){M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n,i,a){this._brushController||(this._brushController=new Zo(i.getZr()),this._brushController.on("brush",Z(this._onBrush,this)).mount()),Xs(t,n,this,a,i),Us(t,n)},e.prototype.onclick=function(t,n,i){Ys[i].call(this)},e.prototype.remove=function(t,n){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,n){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var n=t.areas;if(!t.isEnd||!n.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new Yn(Ee(this.model),a,{include:["grid"]});o.matchOutputRanges(n,a,function(u,c,f){if(f.type==="cartesian2d"){var h=u.brushType;h==="rect"?(s("x",f,c[0]),s("y",f,c[1])):s({lineX:"x",lineY:"y"}[h],f,c)}}),Rs(a,i),this._dispatchZoomAction(i);function s(u,c,f){var h=c.getAxis(u),d=h.model,v=l(u,d,a),p=v.findRepresentativeAxisProxy(d).getMinMaxSpan();(p.minValueSpan!=null||p.maxValueSpan!=null)&&(f=Ln(0,f.slice(),h.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),v&&(i[v.id]={dataZoomId:v.id,startValue:f[0],endValue:f[1]})}function l(u,c,f){var h;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(d){var v=d.getAxisModel(u,c.componentIndex);v&&(h=d)}),h}},e.prototype._dispatchZoomAction=function(t){var n=[];ye(t,function(i,a){n.push(W(i))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},e.getDefaultOption=function(t){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},e}(F),Ys={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(Bs(this.ecModel))}};function Ee(r){var e={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function Us(r,e){r.setIconStatus("back",zs(e)>1?"emphasis":"normal")}function Xs(r,e,t,n,i){var a=t._isZoomActive;n&&n.type==="takeGlobalCursor"&&(a=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),t._isZoomActive=a,r.setIconStatus("zoom",a?"emphasis":"normal");var o=new Yn(Ee(r),e,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}na("dataZoom",function(r){var e=r.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var n=e.getModel(t),i=[],a=Ee(n),o=sn(r,a);ye(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),ye(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var f=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:Fs+u+f};h[c]=f,i.push(h)}return i});const Ks=$s;function js(r){r.registerComponentModel(ds),r.registerComponentView(ys),At("saveAsImage",xs),At("magicType",ws),At("dataView",ks),At("dataZoom",Ks),At("restore",Gs),ct(fs)}var qs=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(tt);const Js=qs;function Un(r){var e=r.get("confine");return e!=null?!!e:r.get("renderMode")==="richText"}function Xn(r){if(z.domSupported){for(var e=document.documentElement.style,t=0,n=r.length;t<n;t++)if(r[t]in e)return r[t]}}var Kn=Xn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qs=Xn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function jn(r,e){if(!r)return e;e=ln(e,!0);var t=r.indexOf(e);return r=t===-1?e:"-"+r.slice(0,t)+"-"+e,r.toLowerCase()}function tl(r,e){var t=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return t?e?t[e]:t:null}var el=jn(Qs,"transition"),ze=jn(Kn,"transform"),rl="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(z.transform3dSupported?"will-change:transform;":"");function nl(r){return r=r==="left"?"right":r==="right"?"left":r==="top"?"bottom":"top",r}function il(r,e,t){if(!D(t)||t==="inside")return"";var n=r.get("backgroundColor"),i=r.get("borderWidth");e=Et(e);var a=nl(t),o=Math.max(Math.round(i)*1.5,6),s="",l=ze+":",u;N(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=o+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+a+":-"+d+"px";var v=e+" solid "+i+"px;",p=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+v,"border-right:"+v,"background-color:"+n+";"];return'<div style="'+p.join("")+'"></div>'}function al(r,e){var t="cubic-bezier(0.23,1,0.32,1)",n=" "+r/2+"s "+t,i="opacity"+n+",visibility"+n;return e||(n=" "+r+"s "+t,i+=z.transformSupported?","+ze+n:",left"+n+",top"+n),el+":"+i}function Gr(r,e,t){var n=r.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!z.transformSupported)return t?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var a=z.transform3dSupported,o="translate"+(a?"3d":"")+"("+n+","+i+(a?",0":"")+")";return t?"top:0;left:0;"+ze+":"+o+";":[["top",0],["left",0],[Kn,o]]}function ol(r){var e=[],t=r.get("fontSize"),n=r.getTextColor();n&&e.push("color:"+n),e.push("font:"+r.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var i=r.get("textShadowColor"),a=r.get("textShadowBlur")||0,o=r.get("textShadowOffsetX")||0,s=r.get("textShadowOffsetY")||0;return i&&a&&e.push("text-shadow:"+o+"px "+s+"px "+a+"px "+i),_(["decoration","align"],function(l){var u=r.get(l);u&&e.push("text-"+l+":"+u)}),e.join(";")}function sl(r,e,t){var n=[],i=r.get("transitionDuration"),a=r.get("backgroundColor"),o=r.get("shadowBlur"),s=r.get("shadowColor"),l=r.get("shadowOffsetX"),u=r.get("shadowOffsetY"),c=r.getModel("textStyle"),f=un(r,"html"),h=l+"px "+u+"px "+o+"px "+s;return n.push("box-shadow:"+h),e&&i&&n.push(al(i,t)),a&&n.push("background-color:"+a),_(["width","color","radius"],function(d){var v="border-"+d,p=ln(v),g=r.get(p);g!=null&&n.push(v+":"+g+(d==="color"?"":"px"))}),n.push(ol(c)),f!=null&&n.push("padding:"+Te(f).join("px ")+"px"),n.join(";")+";"}function Hr(r,e,t,n,i){var a=e&&e.painter;if(t){var o=a&&a.getViewportRoot();o&&Ci(r,o,document.body,n,i)}else{r[0]=n,r[1]=i;var s=a&&a.getViewportRootOffset();s&&(r[0]+=s.offsetLeft,r[1]+=s.offsetTop)}r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}var ll=function(){function r(e,t,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,z.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=t.getZr(),o=this._appendToBody=n&&n.appendToBody;Hr(this._styleCoord,a,o,t.getWidth()/2,t.getHeight()/2),o?document.body.appendChild(i):e.appendChild(i),this._container=e;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=a.handler,c=a.painter.getViewportRoot();ia(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return r.prototype.update=function(e){var t=this._container,n=tl(t,"position"),i=t.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},r.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,a=this._styleCoord;n.innerHTML?i.cssText=rl+sl(e,!this._firstShow,this._longHide)+Gr(a[0],a[1],!0)+("border-color:"+Et(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(e,t,n,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(D(a)&&n.get("trigger")==="item"&&!Un(n)&&(s=il(n,i,a)),D(e))o.innerHTML=e+s;else if(e){o.innerHTML="",R(e)||(e=[e]);for(var l=0;l<e.length;l++)on(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},r.prototype.moveTo=function(e,t){var n=this._styleCoord;if(Hr(n,this._zr,this._appendToBody,e,t),n[0]!=null&&n[1]!=null){var i=this.el.style,a=Gr(n[0],n[1]);_(a,function(o){i[o[0]]=o[1]})}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",z.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Z(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},r}();const ul=ll;var cl=function(){function r(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),Wr(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return r.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(e,t,n,i,a){var o=this;j(e)&&P(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new $({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:un(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),_(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=n.get(u)}),_(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),n=Nr(e.style);return[t.width+n.left+n.right,t.height+n.top+n.bottom]},r.prototype.moveTo=function(e,t){var n=this.el;if(n){var i=this._styleCoord;Wr(i,this._zr,e,t),e=i[0],t=i[1];var a=n.style,o=rt(a.borderWidth||0),s=Nr(a);n.x=e+o+s.left,n.y=t+o+s.top,n.markRedraw()}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Z(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r}();function rt(r){return Math.max(0,r)}function Nr(r){var e=rt(r.shadowBlur||0),t=rt(r.shadowOffsetX||0),n=rt(r.shadowOffsetY||0);return{left:rt(e-t),right:rt(e+t),top:rt(e-n),bottom:rt(e+n)}}function Wr(r,e,t,n){r[0]=t,r[1]=n,r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}const fl=cl;var hl=new Q({shape:{x:-1,y:-1,width:2,height:2}}),dl=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){if(!(z.node||!n.getDom())){var i=t.getComponent("tooltip"),a=this._renderMode=Ai(i.get("renderMode"));this._tooltipContent=a==="richText"?new fl(n):new ul(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(t,n,i){if(!(z.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=n,this._api=i;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?vn(this,"_updatePosition",50,"fixRate"):ne(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,n=t.get("triggerOn");Sn("itemTooltip",this._api,Z(function(i,a,o){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,n=this._ecModel,i=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,n,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,n,i,a){if(!(a.from===this.uid||z.node||!i.getDom())){var o=Zr(a,i);this._ticket="";var s=a.dataByCoordSys,l=yl(a,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=hl;c.x=a.x,c.y=a.y,c.update(),Y(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,n,i,a))return;var f=Tn(a,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(t,n,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(Zr(a,i))},e.prototype._manuallyAxisShowTip=function(t,n,i,a){var o=a.seriesIndex,s=a.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=n.getSeriesByIndex(o);if(u){var c=u.getData(),f=St([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(t,n){var i=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){this._lastDataByCoordSys=null;var s,l;aa(i,function(u){if(Y(u).dataIndex!=null)return s=u,!0;if(Y(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(t,s,n):l?this._showComponentItemTooltip(t,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},e.prototype._showOrMove=function(t,n){var i=t.get("showDelay");n=Z(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},e.prototype._showAxisTooltip=function(t,n){var i=this._ecModel,a=this._tooltipModel,o=[n.offsetX,n.offsetY],s=St([n.tooltipOption],a),l=this._renderMode,u=[],c=We("section",{blocks:[],noHeader:!0}),f=[],h=new Wt;_(t,function(x){_(x.dataByAxis,function(m){var b=i.getComponent(m.axisDim+"Axis",m.axisIndex),w=m.value;if(!(!b||w==null)){var C=Cn(w,b.axis,i,m.seriesDataIndices,m.valueLabelOpt),A=We("section",{header:C,noHeader:!Si(C),sortBlocks:!0,blocks:[]});c.blocks.push(A),_(m.seriesDataIndices,function(S){var T=i.getSeriesByIndex(S.seriesIndex),I=S.dataIndexInside,O=T.getDataParams(I);if(!(O.dataIndex<0)){O.axisDim=m.axisDim,O.axisIndex=m.axisIndex,O.axisType=m.axisType,O.axisId=m.axisId,O.axisValue=dn(b.axis,{value:w}),O.axisValueLabel=C,O.marker=h.makeTooltipMarker("item",Et(O.color),l);var E=Ze(T.formatTooltip(I,!0,null)),G=E.frag;if(G){var st=St([T],a).get("valueFormatter");A.blocks.push(st?ot({valueFormatter:st},G):G)}E.text&&f.push(E.text),u.push(O)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,v=s.get("order"),p=Fe(c,h,l,v,i.get("useUTC"),s.get("textStyle"));p&&f.unshift(p);var g=l==="richText"?`

`:"<br/>",y=f.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(s,d,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,y,u,Math.random()+"",o[0],o[1],d,null,h)})},e.prototype._showSeriesItemTooltip=function(t,n,i){var a=this._ecModel,o=Y(n),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,c=o.dataIndex,f=o.dataType,h=u.getData(f),d=this._renderMode,v=t.positionDefault,p=St([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,v?{position:v}:null),g=p.get("trigger");if(!(g!=null&&g!=="item")){var y=u.getDataParams(c,f),x=new Wt;y.marker=x.makeTooltipMarker("item",Et(y.color),d);var m=Ze(u.formatTooltip(c,!1,f)),b=p.get("order"),w=p.get("valueFormatter"),C=m.frag,A=C?Fe(w?ot({valueFormatter:w},C):C,x,d,b,a.get("useUTC"),p.get("textStyle")):m.text,S="item_"+u.name+"_"+c;this._showOrMove(p,function(){this._showTooltipContent(p,A,y,S,t.offsetX,t.offsetY,t.position,t.target,x)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,n,i){var a=Y(n),o=a.tooltipConfig,s=o.option||{};if(D(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(a.componentMainType,a.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=t.positionDefault,h=St(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),v=Math.random()+"",p=new Wt;this._showOrMove(h,function(){var g=W(h.get("formatterParams")||{});this._showTooltipContent(h,d,g,v,t.offsetX,t.offsetY,t.position,n,p)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,n,i,a,o,s,l,u,c){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var f=this._tooltipContent;f.setEnterable(t.get("enterable"));var h=t.get("formatter");l=l||t.get("position");var d=n,v=this._getNearestPoint([o,s],i,t.get("trigger"),t.get("borderColor")),p=v.color;if(h)if(D(h)){var g=t.ecModel.get("useUTC"),y=R(i)?i[0]:i,x=y&&y.axisType&&y.axisType.indexOf("time")>=0;d=h,x&&(d=Ti(y.axisValue,d,g)),d=Mi(d,i,!0)}else if(U(h)){var m=Z(function(b,w){b===this._ticket&&(f.setContent(w,c,t,p,l),this._updatePosition(t,l,o,s,f,i,u))},this);this._ticket=a,d=h(i,a,m)}else d=h;f.setContent(d,c,t,p,l),f.show(t,p),this._updatePosition(t,l,o,s,f,i,u)}},e.prototype._getNearestPoint=function(t,n,i,a){if(i==="axis"||R(n))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!R(n))return{color:a||n.color||n.borderColor}},e.prototype._updatePosition=function(t,n,i,a,o,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||t.get("position");var f=o.getSize(),h=t.get("align"),d=t.get("verticalAlign"),v=l&&l.getBoundingRect().clone();if(l&&v.applyTransform(l.transform),U(n)&&(n=n([i,a],s,o.el,v,{viewSize:[u,c],contentSize:f.slice()})),R(n))i=$e(n[0],u),a=$e(n[1],c);else if(j(n)){var p=n;p.width=f[0],p.height=f[1];var g=xt(p,{width:u,height:c});i=g.x,a=g.y,h=null,d=null}else if(D(n)&&l){var y=gl(n,v,f,t.get("borderWidth"));i=y[0],a=y[1]}else{var y=vl(i,a,o,u,c,h?null:20,d?null:20);i=y[0],a=y[1]}if(h&&(i-=Fr(h)?f[0]/2:h==="right"?f[0]:0),d&&(a-=Fr(d)?f[1]/2:d==="bottom"?f[1]:0),Un(t)){var y=pl(i,a,o,u,c);i=y[0],a=y[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(t,n){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===t.length;return o&&_(i,function(s,l){var u=s.dataByAxis||[],c=t[l]||{},f=c.dataByAxis||[];o=o&&u.length===f.length,o&&_(u,function(h,d){var v=f[d]||{},p=h.seriesDataIndices||[],g=v.seriesDataIndices||[];o=o&&h.value===v.value&&h.axisType===v.axisType&&h.axisId===v.axisId&&p.length===g.length,o&&_(p,function(y,x){var m=g[x];o=o&&y.seriesIndex===m.seriesIndex&&y.dataIndex===m.dataIndex}),a&&_(h.seriesDataIndices,function(y){var x=y.seriesIndex,m=n[x],b=a[x];m&&b&&b.data!==m.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=n,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,n){z.node||!n.getDom()||(ne(this,"_updatePosition"),this._tooltipContent.dispose(),ue("itemTooltip",n))},e.type="tooltip",e}(et);function St(r,e,t){var n=e.ecModel,i;t?(i=new nt(t,n,n),i=new nt(e.option,i,n)):i=e;for(var a=r.length-1;a>=0;a--){var o=r[a];o&&(o instanceof nt&&(o=o.get("tooltip",!0)),D(o)&&(o={formatter:o}),o&&(i=new nt(o,i,n)))}return i}function Zr(r,e){return r.dispatchAction||Z(e.dispatchAction,e)}function vl(r,e,t,n,i,a,o){var s=t.getSize(),l=s[0],u=s[1];return a!=null&&(r+l+a+2>n?r-=l+a:r+=a),o!=null&&(e+u+o>i?e-=u+o:e+=o),[r,e]}function pl(r,e,t,n,i){var a=t.getSize(),o=a[0],s=a[1];return r=Math.min(r+o,n)-o,e=Math.min(e+s,i)-s,r=Math.max(r,0),e=Math.max(e,0),[r,e]}function gl(r,e,t,n){var i=t[0],a=t[1],o=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=e.width,c=e.height;switch(r){case"inside":s=e.x+u/2-i/2,l=e.y+c/2-a/2;break;case"top":s=e.x+u/2-i/2,l=e.y-a-o;break;case"bottom":s=e.x+u/2-i/2,l=e.y+c+o;break;case"left":s=e.x-i-o,l=e.y+c/2-a/2;break;case"right":s=e.x+u+o,l=e.y+c/2-a/2}return[s,l]}function Fr(r){return r==="center"||r==="middle"}function yl(r,e,t){var n=Ii(r).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var a=Li(e,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var c=Y(u).tooltipConfig;if(c&&c.name===r.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}const ml=dl;function xl(r){ct(Mn),r.registerComponentModel(Js),r.registerComponentView(ml),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ee),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ee)}var _l=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(tt),bl=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),u=cn(t.get("textBaseline"),t.get("textVerticalAlign")),c=new $({style:_t(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=t.get("subtext"),d=new $({style:_t(s,{text:h,fill:s.getTextColor(),y:f.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),v=t.get("link"),p=t.get("sublink"),g=t.get("triggerEvent",!0);c.silent=!v&&!g,d.silent=!p&&!g,v&&c.on("click",function(){Ye(v,"_"+t.get("target"))}),p&&d.on("click",function(){Ye(p,"_"+t.get("subtarget"))}),Y(c).eventData=Y(d).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(c),h&&a.add(d);var y=a.getBoundingRect(),x=t.getBoxLayoutParams();x.width=y.width,x.height=y.height;var m=xt(x,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?m.x+=m.width:l==="center"&&(m.x+=m.width/2)),u||(u=t.get("top")||t.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?m.y+=m.height:u==="middle"&&(m.y+=m.height/2),u=u||"top"),a.x=m.x,a.y=m.y,a.markRedraw();var b={align:l,verticalAlign:u};c.setStyle(b),d.setStyle(b),y=a.getBoundingRect();var w=m.margin,C=t.getItemStyle(["color","opacity"]);C.fill=t.get("backgroundColor");var A=new Q({shape:{x:y.x-w[3],y:y.y-w[0],width:y.width+w[1]+w[3],height:y.height+w[0]+w[2],r:t.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});a.add(A)}},e.type="title",e}(et);function wl(r){r.registerComponentModel(_l),r.registerComponentView(bl)}var Cl=function(r,e){if(e==="all")return{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}},Al=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,n,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,n){r.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},e.prototype._updateSelector=function(t){var n=t.selector,i=this.ecModel;n===!0&&(n=t.selector=["all","inverse"]),R(n)&&_(n,function(a,o){D(a)&&(a={type:a}),n[o]=k(a,Cl(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),n=!0;break}}!n&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var n=[],i=[];t.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var f=l.legendVisualProvider,h=f.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(h)),h.length?n=n.concat(h):c=!0}else c=!0;c&&Pi(l)&&n.push(l.name)}),this._availableNames=i;var a=this.get("data")||n,o=J(),s=B(a,function(l){return(D(l)||Ae(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new nt(l,this,this.ecModel))},this);this._data=we(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;_(a,function(o){n[o.get("name")]=!1})}n[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var n=this.option.selected;n.hasOwnProperty(t)||(n[t]=!0),this[n[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,n=this.option.selected;_(t,function(i){n[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,n=this.option.selected;_(t,function(i){var a=i.get("name",!0);n.hasOwnProperty(a)||(n[a]=!0),n[a]=!n[a]})},e.prototype.isSelected=function(t){var n=this.option.selected;return!(n.hasOwnProperty(t)&&!n[t])&&N(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(tt);const me=Al;var vt=L,xe=_,Dt=q,Sl=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new Dt),this.group.add(this._selectorGroup=new Dt),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,n,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,t,n,i,l,s,u);var c=t.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=t.get("padding"),d=xt(c,f,h),v=this.layoutInner(t,o,d,a,l,u),p=xt(V({width:v.width,height:v.height},c),f,h);this.group.x=p.x-v.x,this.group.y=p.y-v.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Zn(v,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,n,i,a,o,s,l){var u=this.getContentGroup(),c=J(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),xe(n.getData(),function(d,v){var p=d.get("name");if(!this.newlineDisabled&&(p===""||p===`
`)){var g=new Dt;g.newline=!0,u.add(g);return}var y=i.getSeriesByName(p)[0];if(!c.get(p))if(y){var x=y.getData(),m=x.getVisual("legendLineStyle")||{},b=x.getVisual("legendIcon"),w=x.getVisual("style"),C=this._createItem(y,p,v,d,n,t,m,w,b,f,a);C.on("click",vt($r,p,null,a,h)).on("mouseover",vt(_e,y.name,null,a,h)).on("mouseout",vt(be,y.name,null,a,h)),c.set(p,!0)}else i.eachRawSeries(function(A){if(!c.get(p)&&A.legendVisualProvider){var S=A.legendVisualProvider;if(!S.containName(p))return;var T=S.indexOfName(p),I=S.getItemVisual(T,"style"),O=S.getItemVisual(T,"legendIcon"),E=Di(I.fill);E&&E[3]===0&&(E[3]=.2,I=ot(ot({},I),{fill:Oi(E,"rgba")}));var G=this._createItem(A,p,v,d,n,t,{},I,O,f,a);G.on("click",vt($r,null,p,a,h)).on("mouseover",vt(_e,null,p,a,h)).on("mouseout",vt(be,null,p,a,h)),c.set(p,!0)}},this)},this),o&&this._createSelector(o,n,a,s,l)},e.prototype._createSelector=function(t,n,i,a,o){var s=this.getSelectorGroup();xe(t,function(u){var c=u.type,f=new $({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);ki(f,{normal:h,emphasis:d},{defaultText:u.title}),Ue(f)})},e.prototype._createItem=function(t,n,i,a,o,s,l,u,c,f,h){var d=t.visualDrawType,v=o.get("itemWidth"),p=o.get("itemHeight"),g=o.isSelected(n),y=a.get("symbolRotate"),x=a.get("symbolKeepAspect"),m=a.get("icon");c=m||c||"roundRect";var b=Tl(c,a,l,u,d,g,h),w=new Dt,C=a.getModel("textStyle");if(U(t.getLegendIcon)&&(!m||m==="inherit"))w.add(t.getLegendIcon({itemWidth:v,itemHeight:p,icon:c,iconRotate:y,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}));else{var A=m==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;w.add(Ml({itemWidth:v,itemHeight:p,icon:c,iconRotate:A,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}))}var S=s==="left"?v+5:-5,T=s,I=o.get("formatter"),O=n;D(I)&&I?O=I.replace("{name}",n??""):U(I)&&(O=I(n));var E=a.get("inactiveColor");w.add(new $({style:_t(C,{text:O,x:S,y:p/2,fill:g?C.getTextColor():E,align:T,verticalAlign:"middle"})}));var G=new Q({shape:w.getBoundingRect(),invisible:!0}),st=a.getModel("tooltip");return st.get("show")&&Ce({el:G,componentModel:o,itemName:n,itemTooltipOption:st.option}),w.add(G),w.eachChild(function(ei){ei.silent=!0}),G.silent=!f,this.getContentGroup().add(w),Ue(w),w.__legendDataIndex=i,w},e.prototype.layoutInner=function(t,n,i,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();yt(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),o){yt("horizontal",u,t.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],v=t.get("selectorButtonGap",!0),p=t.getOrient().index,g=p===0?"width":"height",y=p===0?"height":"width",x=p===0?"y":"x";s==="end"?d[p]+=c[g]+v:f[p]+=h[g]+v,d[1-p]+=c[y]/2-h[y]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var m={x:0,y:0};return m[g]=c[g]+v+h[g],m[y]=Math.max(c[y],h[y]),m[x]=Math.min(0,h[x]+d[1-p]),m}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(et);function Tl(r,e,t,n,i,a,o){function s(g,y){g.lineWidth==="auto"&&(g.lineWidth=y.lineWidth>0?2:0),xe(g,function(x,m){g[m]==="inherit"&&(g[m]=y[m])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=r.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:oa(f,o),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:t).opacity),s(u,n);var h=e.getModel("lineStyle"),d=h.getLineStyle();if(s(d,t),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!a){var v=e.get("inactiveBorderWidth"),p=u[c];u.lineWidth=v==="auto"?n.lineWidth>0&&p?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function Ml(r){var e=r.icon||"roundRect",t=pn(e,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return t.setStyle(r.itemStyle),t.rotation=(r.iconRotate||0)*Math.PI/180,t.setOrigin([r.itemWidth/2,r.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function $r(r,e,t,n){be(r,e,t,n),t.dispatchAction({type:"legendToggleSelect",name:r??e}),_e(r,e,t,n)}function qn(r){for(var e=r.getZr().storage.getDisplayList(),t,n=0,i=e.length;n<i&&!(t=e[n].states.emphasis);)n++;return t&&t.hoverLayer}function _e(r,e,t,n){qn(t)||t.dispatchAction({type:"highlight",seriesName:r,name:e,excludeSeriesId:n})}function be(r,e,t,n){qn(t)||t.dispatchAction({type:"downplay",seriesName:r,name:e,excludeSeriesId:n})}const Jn=Sl;function Il(r){var e=r.findComponents({mainType:"legend"});e&&e.length&&r.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}function Tt(r,e,t){var n={},i=r==="toggleSelected",a;return t.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](e.name):r==="allSelect"||r==="inverseSelect"?o[r]():(o[r](e.name),a=o.isSelected(e.name));var s=o.getData();_(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=o.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),r==="allSelect"||r==="inverseSelect"?{selected:n}:{name:e.name,selected:n}}function Ll(r){r.registerAction("legendToggleSelect","legendselectchanged",L(Tt,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",L(Tt,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",L(Tt,"inverseSelect")),r.registerAction("legendSelect","legendselected",L(Tt,"select")),r.registerAction("legendUnSelect","legendunselected",L(Tt,"unSelect"))}function Qn(r){r.registerComponentModel(me),r.registerComponentView(Jn),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,Il),r.registerSubTypeDefaulter("legend",function(){return"plain"}),Ll(r)}var Pl=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,n,i){var a=jr(t);r.prototype.init.call(this,t,n,i),Yr(this,t,a)},e.prototype.mergeOption=function(t,n){r.prototype.mergeOption.call(this,t,n),Yr(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Ri(me.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(me);function Yr(r,e,t){var n=r.getOrient(),i=[1,1];i[n.index]=0,qr(e,t,{type:"box",ignoreSize:!!i})}const Dl=Pl;var Ur=q,Jt=["width","height"],Qt=["x","y"],Ol=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new Ur),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Ur)},e.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,n,i,a,o,s,l){var u=this;r.prototype.renderInner.call(this,t,n,i,a,o,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=R(f)?f:[f,f];v("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new $({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),v("pageNext",1);function v(p,g){var y=p+"DataIndex",x=Se(n.get("pageIcons",!0)[n.getOrient().name][g],{onclick:Z(u._pageGo,u,y,n,a)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});x.name=p,c.add(x)}},e.prototype.layoutInner=function(t,n,i,a,o,s){var l=this.getSelectorGroup(),u=t.getOrient().index,c=Jt[u],f=Qt[u],h=Jt[1-u],d=Qt[1-u];o&&yt("horizontal",l,t.get("selectorItemGap",!0));var v=t.get("selectorButtonGap",!0),p=l.getBoundingRect(),g=[-p.x,-p.y],y=W(i);o&&(y[c]=i[c]-p[c]-v);var x=this._layoutContentAndController(t,a,y,u,c,h,d,f);if(o){if(s==="end")g[u]+=x[c]+v;else{var m=p[c]+v;g[u]-=m,x[f]-=m}x[c]+=p[c]+v,g[1-u]+=x[d]+x[h]/2-p[h]/2,x[h]=Math.max(x[h],p[h]),x[d]=Math.min(x[d],p[d]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return x},e.prototype._layoutContentAndController=function(t,n,i,a,o,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;yt(t.get("orient"),c,t.get("itemGap"),a?i.width:null,a?null:i.height),yt("horizontal",h,t.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),v=h.getBoundingRect(),p=this._showController=d[o]>i[o],g=[-d.x,-d.y];n||(g[a]=c[u]);var y=[0,0],x=[-v.x,-v.y],m=cn(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(p){var b=t.get("pageButtonPosition",!0);b==="end"?x[a]+=i[o]-v[o]:y[a]+=v[o]+m}x[1-a]+=d[s]/2-v[s]/2,c.setPosition(g),f.setPosition(y),h.setPosition(x);var w={x:0,y:0};if(w[o]=p?i[o]:d[o],w[s]=Math.max(d[s],v[s]),w[l]=Math.min(0,v[l]+x[1-a]),f.__rectSize=i[o],p){var C={x:0,y:0};C[o]=Math.max(i[o]-v[o]-m,0),C[s]=w[s],f.setClipPath(new Q({shape:C})),f.__rectSize=C[o]}else h.eachChild(function(S){S.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(t);return A.pageIndex!=null&&en(c,{x:A.contentPosition[0],y:A.contentPosition[1]},p?t:null),this._updatePageInfoView(t,A),w},e.prototype._pageGo=function(t,n,i){var a=this._getPageInfo(n)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:n.id})},e.prototype._updatePageInfoView=function(t,n){var i=this._controllerGroup;_(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var a=i.childOfName("pageText"),o=t.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;a&&o&&a.setStyle("text",D(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},e.prototype._getPageInfo=function(t){var n=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,s=Jt[o],l=Qt[o],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,v={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return v;var p=b(f);v.contentPosition[o]=-p.s;for(var g=u+1,y=p,x=p,m=null;g<=h;++g)m=b(c[g]),(!m&&x.e>y.s+a||m&&!w(m,y.s))&&(x.i>y.i?y=x:y=m,y&&(v.pageNextDataIndex==null&&(v.pageNextDataIndex=y.i),++v.pageCount)),x=m;for(var g=u-1,y=p,x=p,m=null;g>=-1;--g)m=b(c[g]),(!m||!w(x,m.s))&&y.i<x.i&&(x=y,v.pagePrevDataIndex==null&&(v.pagePrevDataIndex=y.i),++v.pageCount,++v.pageIndex),y=m;return v;function b(C){if(C){var A=C.getBoundingRect(),S=A[l]+C[l];return{s:S,e:S+A[s],i:C.__legendDataIndex}}}function w(C,A){return C.e>=A&&C.s<=A+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var n,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===t&&(n=s)}),n??a},e.type="legend.scroll",e}(Jn);const kl=Ol;function Rl(r){r.registerAction("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;n!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(n)})})}function Bl(r){ct(Qn),r.registerComponentModel(Dl),r.registerComponentView(kl),Rl(r)}function El(r){ct(Qn),ct(Bl)}var Xr={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},zl=function(){function r(e){var t=this._condVal=D(e)?new RegExp(e):zi(e)?e:null;if(t==null){var n="";P(n)}}return r.prototype.evaluate=function(e){var t=typeof e;return D(t)?this._condVal.test(e):Ae(t)?this._condVal.test(e+""):!1},r}(),Vl=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),Gl=function(){function r(){}return r.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},r}(),Hl=function(){function r(){}return r.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},r}(),Nl=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),Wl=function(){function r(){}return r.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,n=t(this.valueGetterParam),i=e?this.valueParser(n):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:n))return!1;return!0},r}();function Ve(r,e){if(r===!0||r===!1){var t=new Vl;return t.value=r,t}var n="";return ti(r)||P(n),r.and?Kr("and",r,e):r.or?Kr("or",r,e):r.not?Zl(r,e):Fl(r,e)}function Kr(r,e,t){var n=e[r],i="";R(n)||P(i),n.length||P(i);var a=r==="and"?new Gl:new Hl;return a.children=B(n,function(o){return Ve(o,t)}),a.children.length||P(i),a}function Zl(r,e){var t=r.not,n="";ti(t)||P(n);var i=new Nl;return i.child=Ve(t,e),i.child||P(n),i}function Fl(r,e){for(var t="",n=e.prepareGetValue(r),i=[],a=Jr(r),o=r.parser,s=o?fn(o):null,l=0;l<a.length;l++){var u=a[l];if(!(u==="parser"||e.valueGetterAttrMap.get(u))){var c=hn(Xr,u)?Xr[u]:u,f=r[u],h=s?s(f):f,d=Bi(c,h)||c==="reg"&&new zl(h);d||P(t),i.push(d)}}i.length||P(t);var v=new Wl;return v.valueGetterParam=n,v.valueParser=s,v.getValue=e.getValue,v.subCondList=i,v}function ti(r){return j(r)&&!Ei(r)}var $l=function(){function r(e,t){this._cond=Ve(e,t)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}();function Yl(r,e){return new $l(r,e)}var Ul={type:"echarts:filter",transform:function(r){for(var e=r.upstream,t,n=Yl(r.config,{valueGetterAttrMap:J({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;hn(s,"dimension")||P(l);var c=e.getDimensionInfo(u);return c||P(l),{dimIdx:c.index}},getValue:function(s){return e.retrieveValueFromItem(t,s.dimIdx)}}),i=[],a=0,o=e.count();a<o;a++)t=e.getRawDataItem(a),n.evaluate()&&i.push(t);return{data:i}}},Xl={type:"echarts:sort",transform:function(r){var e=r.upstream,t=r.config,n="",i=Ni(t);i.length||P(n);var a=[];_(i,function(c){var f=c.dimension,h=c.order,d=c.parser,v=c.incomparable;if(f==null&&P(n),h!=="asc"&&h!=="desc"&&P(n),v&&v!=="min"&&v!=="max"){var p="";P(p)}if(h!=="asc"&&h!=="desc"){var g="";P(g)}var y=e.getDimensionInfo(f);y||P(n);var x=d?fn(d):null;d&&!x&&P(n),a.push({dimIdx:y.index,parser:x,comparator:new Vi(h,v)})});var o=e.sourceFormat;o!==Gi&&o!==Hi&&P(n);for(var s=[],l=0,u=e.count();l<u;l++)s.push(e.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<a.length;h++){var d=a[h],v=e.retrieveValueFromItem(c,d.dimIdx),p=e.retrieveValueFromItem(f,d.dimIdx);d.parser&&(v=d.parser(v),p=d.parser(p));var g=d.comparator.evaluate(v,p);if(g!==0)return g}return 0}),{data:s}}};function Kl(r){r.registerTransform(Ul),r.registerTransform(Xl)}var jl=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,n,i){r.prototype.init.call(this,t,n,i),this._sourceManager=new Wi(this),Xe(this)},e.prototype.mergeOption=function(t,n){r.prototype.mergeOption.call(this,t,n),Xe(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Zi},e}(tt),ql=function(r){M(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(et);function Jl(r){r.registerComponentModel(jl),r.registerComponentView(ql)}const au=function(r){r.use([wl,xl,wo,Jl,Kl,js,El])};export{au as default};
