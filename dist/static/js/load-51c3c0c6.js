import{Z as Mr,M as Pe,m as Xr,c as Wr,e as zr,g as ve,a as jr,w as $e,_ as Ue,b as S,B as V,i as Jr,d as Kr,f as $r,h as Tr,j as Qr,k as et,l as Z,n as z,o as rt,p as tt,q as at,r as nt,s as it,t as st,u as ot,v as vt,x as ft,y as dt,z as ut,A as Rr,C as lt,D as ht,E as ct,F as gt,G as pt,H as _t,I as yt,J as mt,K as Lt,L as xt,N as It,O as Mt,P as Tt,Q as Rt,R as Ct,S as St,T as Pt,U as Cr,V as Dt,W as wt,X as Sr,Y as bt,$ as De,a0 as Et,a1 as Gt,a2 as At,a3 as Ot,a4 as Bt,a5 as Ht,a6 as Nt,a7 as fe,a8 as Vt,a9 as Ut,aa as kt,ab as Ft,ac as Zt,ad as we,ae as Yt,af as qt,ag as Xt,ah as Wt,ai as zt,aj as jt,ak as Jt,al as Kt,am as $t,an as Qt,ao as ea,ap as ra,aq as F,ar as de,as as ue,at as ta,au as $,av as be,aw as Pr,ax as aa,ay as Q,az as na,aA as Ee,aB as Ge,aC as Ae,aD as Dr,aE as _e,aF as ia,aG as Qe,aH as sa,aI as oa,aJ as va,aK as fa,aL as da,aM as wr,aN as ua,aO as la,aP as ha,aQ as ca,aR as ga,aS as pa,aT as le,aU as br,aV as W,aW as ke,aX as _a,aY as te,aZ as Fe,a_ as ee,a$ as ye,b0 as er,b1 as me,b2 as ya,b3 as ma,b4 as Er,b5 as Oe,b6 as La,b7 as xa,b8 as Gr,b9 as Ia,ba as Ma,bb as Ta}from"./SeriesDataSchema-e01fbb85.js";import{c as Ra,n as Ca,A as Sa,C as Be,a as Pa,P as Da,b as wa,d as ba,e as Ea,f as Ga,g as Aa,h as Oa,i as Ba,j as Ha,k as Na,l as Va,m as Ua,o as Ar,r as ka,p as Fa,q as Za,s as Ya,t as qa,u as Xa,v as Wa,w as za,x as ja,y as Ja,z as Ka,B as $a,D as Qa,E as en,F as Or,G as rn,H as tn,I as an,J as nn,K as ae,L as ne,M as sn}from"./Axis-641b6e86.js";import{t as on}from"./barGrid-2ac5151e.js";import{c as vn}from"./createSeriesData-7b33dbb4.js";import{i as fn,e as dn,g as un}from"./vendor-0df7ddac.js";import{c as ln,S as hn}from"./createDimensions-c5d691ce.js";import{c as cn}from"./symbol-b9709339.js";import{s as gn,g as pn,u as rr}from"./labelGuideHelper-79b96b9f.js";import{p as _n,s as yn,a as mn,h as Ln}from"./labelLayoutHelper-2c911300.js";function xn(n,e,t,r,a,i,s,o){var v=new Mr({style:{text:n,font:e,align:t,verticalAlign:r,padding:a,rich:i,overflow:s?"truncate":null,lineHeight:o}});return v.getBoundingRect()}function In(n){return vn(null,n)}var Mn={isDimensionStacked:fn,enableDataStack:dn,getStackedDimension:un};function Tn(n,e){var t=e;e instanceof Pe||(t=new Pe(e));var r=Ra(t);return r.setExtent(n[0],n[1]),Ca(r,t),r}function Rn(n){Xr(n,Sa)}function Cn(n,e){return e=e||{},Wr(n,null,null,e.state!=="normal")}const Sn=Object.freeze(Object.defineProperty({__proto__:null,createDimensions:ln,createList:In,createScale:Tn,createSymbol:cn,createTextStyle:Cn,dataStack:Mn,enableHoverEmphasis:zr,getECData:ve,getLayoutRect:jr,mixinAxisModelCommonMethods:Rn},Symbol.toStringTag,{value:"Module"}));var Pn=1e-8;function tr(n,e){return Math.abs(n-e)<Pn}function ar(n,e,t){var r=0,a=n[0];if(!a)return!1;for(var i=1;i<n.length;i++){var s=n[i];r+=$e(a[0],a[1],s[0],s[1],e,t),a=s}var o=n[0];return(!tr(a[0],o[0])||!tr(a[1],o[1]))&&(r+=$e(a[0],a[1],o[0],o[1],e,t)),r!==0}var Dn=[];function Le(n,e){for(var t=0;t<n.length;t++)Tr(n[t],n[t],e)}function nr(n,e,t,r){for(var a=0;a<n.length;a++){var i=n[a];r&&(i=r.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Qr(e,e,i),et(t,t,i))}}function wn(n){for(var e=0,t=0,r=0,a=n.length,i=n[a-1][0],s=n[a-1][1],o=0;o<a;o++){var v=n[o][0],f=n[o][1],d=i*f-v*s;e+=d,t+=(i+v)*d,r+=(s+f)*d,i=v,s=f}return e?[t/e/3,r/e/3,e]:[n[0][0]||0,n[0][1]||0]}var Br=function(){function n(e){this.name=e}return n.prototype.setCenter=function(e){this._center=e},n.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},n}(),ir=function(){function n(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return n}(),sr=function(){function n(e){this.type="linestring",this.points=e}return n}(),bn=function(n){Ue(e,n);function e(t,r,a){var i=n.call(this,t)||this;return i.type="geoJSON",i.geometries=r,i._center=a&&[a[0],a[1]],i}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,a=0,i=0;i<t.length;i++){var s=t[i],o=s.exterior,v=o&&o.length;v>a&&(r=s,a=v)}if(r)return wn(r.exterior);var f=this.getBoundingRect();return[f.x+f.width/2,f.y+f.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var a=[1/0,1/0],i=[-1/0,-1/0],s=this.geometries;return S(s,function(o){o.type==="polygon"?nr(o.exterior,a,i,t):S(o.points,function(v){nr(v,a,i,t)})}),isFinite(a[0])&&isFinite(a[1])&&isFinite(i[0])&&isFinite(i[1])||(a[0]=a[1]=i[0]=i[1]=0),r=new V(a[0],a[1],i[0]-a[0],i[1]-a[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),a=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var i=0,s=a.length;i<s;i++){var o=a[i];if(o.type==="polygon"){var v=o.exterior,f=o.interiors;if(ar(v,t[0],t[1])){for(var d=0;d<(f?f.length:0);d++)if(ar(f[d],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,a,i){var s=this.getBoundingRect(),o=s.width/s.height;a?i||(i=a/o):a=o*i;for(var v=new V(t,r,a,i),f=s.calculateTransform(v),d=this.geometries,u=0;u<d.length;u++){var l=d[u];l.type==="polygon"?(Le(l.exterior,f),S(l.interiors,function(h){Le(h,f)})):S(l.points,function(h){Le(h,f)})}s=this._rect,s.copy(v),this._center=[s.x+s.width/2,s.y+s.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(Br);(function(n){Ue(e,n);function e(t,r){var a=n.call(this,t)||this;return a.type="geoSVG",a._elOnlyForCalculate=r,a}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),a=[r.x+r.width/2,r.y+r.height/2],i=Jr(Dn),s=t;s&&!s.isGeoSVGGraphicRoot;)Kr(i,s.getLocalTransform(),i),s=s.parent;return $r(i,i),Tr(a,a,i),a},e})(Br);function En(n){if(!n.UTF8Encoding)return n;var e=n,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return S(r,function(a){var i=a.geometry,s=i.encodeOffsets,o=i.coordinates;if(s)switch(i.type){case"LineString":i.coordinates=Hr(o,s,t);break;case"Polygon":xe(o,s,t);break;case"MultiLineString":xe(o,s,t);break;case"MultiPolygon":S(o,function(v,f){return xe(v,s[f],t)})}}),e.UTF8Encoding=!1,e}function xe(n,e,t){for(var r=0;r<n.length;r++)n[r]=Hr(n[r],e[r],t)}function Hr(n,e,t){for(var r=[],a=e[0],i=e[1],s=0;s<n.length;s+=2){var o=n.charCodeAt(s)-64,v=n.charCodeAt(s+1)-64;o=o>>1^-(o&1),v=v>>1^-(v&1),o+=a,v+=i,a=o,i=v,r.push([o/t,v/t])}return r}function or(n,e){return n=En(n),Z(z(n.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,a=t.geometry,i=[];switch(a.type){case"Polygon":var s=a.coordinates;i.push(new ir(s[0],s.slice(1)));break;case"MultiPolygon":S(a.coordinates,function(v){v[0]&&i.push(new ir(v[0],v.slice(1)))});break;case"LineString":i.push(new sr([a.coordinates]));break;case"MultiLineString":i.push(new sr(a.coordinates))}var o=new bn(r[e||"name"],i,r.cp);return o.properties=r,o})}const Gn=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER:rt,asc:tt,getPercentWithPrecision:at,getPixelPrecision:nt,getPrecision:it,getPrecisionSafe:st,isNumeric:ot,isRadianAroundZero:vt,linearMap:ft,nice:dt,numericToNumber:ut,parseDate:Rr,quantile:lt,quantity:ht,quantityExponent:ct,reformIntervals:gt,remRadian:pt,round:_t},Symbol.toStringTag,{value:"Module"})),An=Object.freeze(Object.defineProperty({__proto__:null,format:yt,parse:Rr},Symbol.toStringTag,{value:"Module"})),On=Object.freeze(Object.defineProperty({__proto__:null,Arc:mt,BezierCurve:Lt,BoundingRect:V,Circle:xt,CompoundPath:It,Ellipse:Mt,Group:Tt,Image:Rt,IncrementalDisplayable:Ct,Line:St,LinearGradient:Pt,Polygon:Cr,Polyline:Dt,RadialGradient:wt,Rect:Sr,Ring:bt,Sector:De,Text:Mr,clipPointsByRect:Et,clipRectByRect:Gt,createIcon:At,extendPath:Ot,extendShape:Bt,getShapeClass:Ht,getTransform:Nt,initProps:fe,makeImage:Vt,makePath:Ut,mergePath:kt,registerShape:Ft,resizePath:Zt,updateProps:we},Symbol.toStringTag,{value:"Module"})),Bn=Object.freeze(Object.defineProperty({__proto__:null,addCommas:Yt,capitalFirst:qt,encodeHTML:Xt,formatTime:Wt,formatTpl:zt,getTextRect:xn,getTooltipMarker:jt,normalizeCssArray:Jt,toCamelCase:Kt,truncateText:$t},Symbol.toStringTag,{value:"Module"})),Hn=Object.freeze(Object.defineProperty({__proto__:null,bind:Qt,clone:ea,curry:ra,defaults:F,each:S,extend:de,filter:z,indexOf:ue,inherits:ta,isArray:$,isFunction:be,isObject:Pr,isString:aa,map:Z,merge:Q,reduce:na},Symbol.toStringTag,{value:"Module"}));function Nn(n){var e=Ee.extend(n);return Ee.registerClass(e),e}function Vn(n){var e=Be.extend(n);return Be.registerClass(e),e}function Un(n){var e=Ge.extend(n);return Ge.registerClass(e),e}function kn(n){var e=Ae.extend(n);return Ae.registerClass(e),e}function Fn(n){if(n){for(var e=[],t=0;t<n.length;t++)e.push(n[t].slice());return e}}function Zn(n,e){var t=n.label,r=e&&e.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:Fn(r&&r.shape.points)}}var vr=["align","verticalAlign","width","height","fontSize"],A=new Dr,Ie=_e(),Yn=_e();function ie(n,e,t){for(var r=0;r<t.length;r++){var a=t[r];e[a]!=null&&(n[a]=e[a])}}var se=["x","y","rotation"],qn=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(e,t,r,a,i){var s=a.style,o=a.__hostTarget,v=o.textConfig||{},f=a.getComputedTransform(),d=a.getBoundingRect().plain();V.applyTransform(d,d,f),f?A.setLocalTransform(f):(A.x=A.y=A.rotation=A.originX=A.originY=0,A.scaleX=A.scaleY=1);var u=a.__hostTarget,l;if(u){l=u.getBoundingRect().plain();var h=u.getComputedTransform();V.applyTransform(l,l,h)}var y=l&&u.getTextGuideLine();this._labelList.push({label:a,labelLine:y,seriesModel:r,dataIndex:e,dataType:t,layoutOption:i,computedLayoutOption:null,rect:d,hostRect:l,priority:l?l.width*l.height:0,defaultAttr:{ignore:a.ignore,labelGuideIgnore:y&&y.ignore,x:A.x,y:A.y,scaleX:A.scaleX,scaleY:A.scaleY,rotation:A.rotation,style:{x:s.x,y:s.y,align:s.align,verticalAlign:s.verticalAlign,width:s.width,height:s.height,fontSize:s.fontSize},cursor:a.cursor,attachedPos:v.position,attachedRot:v.rotation}})},n.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,a=r.get("labelLayout");(be(a)||ia(a).length)&&e.group.traverse(function(i){if(i.ignore)return!0;var s=i.getTextContent(),o=ve(i);s&&!s.disableLabelLayout&&t._addLabel(o.dataIndex,o.dataType,r,s,a)})},n.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function a(_,x){return function(){rr(_,x)}}for(var i=0;i<this._labelList.length;i++){var s=this._labelList[i],o=s.label,v=o.__hostTarget,f=s.defaultAttr,d=void 0;be(s.layoutOption)?d=s.layoutOption(Zn(s,v)):d=s.layoutOption,d=d||{},s.computedLayoutOption=d;var u=Math.PI/180;v&&v.setTextConfig({local:!1,position:d.x!=null||d.y!=null?null:f.attachedPos,rotation:d.rotate!=null?d.rotate*u:f.attachedRot,offset:[d.dx||0,d.dy||0]});var l=!1;if(d.x!=null?(o.x=Qe(d.x,t),o.setStyle("x",0),l=!0):(o.x=f.x,o.setStyle("x",f.style.x)),d.y!=null?(o.y=Qe(d.y,r),o.setStyle("y",0),l=!0):(o.y=f.y,o.setStyle("y",f.style.y)),d.labelLinePoints){var h=v.getTextGuideLine();h&&(h.setShape({points:d.labelLinePoints}),l=!1)}var y=Ie(o);y.needsUpdateLabelLine=l,o.rotation=d.rotate!=null?d.rotate*u:f.rotation,o.scaleX=f.scaleX,o.scaleY=f.scaleY;for(var g=0;g<vr.length;g++){var c=vr[g];o.setStyle(c,d[c]!=null?d[c]:f.style[c])}if(d.draggable){if(o.draggable=!0,o.cursor="move",v){var p=s.seriesModel;if(s.dataIndex!=null){var m=s.seriesModel.getData(s.dataType);p=m.getItemModel(s.dataIndex)}o.on("drag",a(v,p.getModel("labelLine")))}}else o.off("drag"),o.cursor=f.cursor}},n.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),a=_n(this._labelList),i=z(a,function(v){return v.layoutOption.moveOverlap==="shiftX"}),s=z(a,function(v){return v.layoutOption.moveOverlap==="shiftY"});yn(i,0,t),mn(s,0,r);var o=z(a,function(v){return v.layoutOption.hideOverlap});Ln(o)},n.prototype.processLabelsOverall=function(){var e=this;S(this._chartViewList,function(t){var r=t.__model,a=t.ignoreLabelLineUpdate,i=r.isAnimationEnabled();t.group.traverse(function(s){if(s.ignore&&!s.forceLabelAnimation)return!0;var o=!a,v=s.getTextContent();!o&&v&&(o=Ie(v).needsUpdateLabelLine),o&&e._updateLabelLine(s,r),i&&e._animateLabels(s,r)})})},n.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),a=ve(e),i=a.dataIndex;if(r&&i!=null){var s=t.getData(a.dataType),o=s.getItemModel(i),v={},f=s.getItemVisual(i,"style"),d=s.getVisual("drawType");v.stroke=f[d];var u=o.getModel("labelLine");gn(e,pn(o),v),rr(e,u)}},n.prototype._animateLabels=function(e,t){var r=e.getTextContent(),a=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!sa(e))){var i=Ie(r),s=i.oldLayout,o=ve(e),v=o.dataIndex,f={x:r.x,y:r.y,rotation:r.rotation},d=t.getData(o.dataType);if(s){r.attr(s);var l=e.prevStates;l&&(ue(l,"select")>=0&&r.attr(i.oldLayoutSelect),ue(l,"emphasis")>=0&&r.attr(i.oldLayoutEmphasis)),we(r,f,t,v)}else if(r.attr(f),!oa(r).valueAnimation){var u=va(r.style.opacity,1);r.style.opacity=0,fe(r,{style:{opacity:u}},t,v)}if(i.oldLayout=f,r.states.select){var h=i.oldLayoutSelect={};ie(h,f,se),ie(h,r.states.select,se)}if(r.states.emphasis){var y=i.oldLayoutEmphasis={};ie(y,f,se),ie(y,r.states.emphasis,se)}fa(r,v,d,t,t)}if(a&&!a.ignore&&!a.invisible){var i=Yn(a),s=i.oldLayout,g={points:a.shape.points};s?(a.attr({shape:s}),we(a,{shape:g},t)):(a.setShape(g),a.style.strokePercent=0,fe(a,{style:{strokePercent:1}},t)),i.oldLayout=g}},n}();const Xn=qn;var Me=_e();function Wn(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var a=Me(t).labelManager;a||(a=Me(t).labelManager=new Xn),a.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var a=Me(t).labelManager;r.updatedSeries.forEach(function(i){a.addLabelsOfSeries(t.getViewOfSeriesModel(i))}),a.updateLayoutConfig(t),a.layout(t),a.processLabelsOverall()})}const Oi=Object.freeze(Object.defineProperty({__proto__:null,Axis:Pa,ChartView:Ae,ComponentModel:Ee,ComponentView:Be,List:hn,Model:Pe,PRIORITY:Da,SeriesModel:Ge,color:da,connect:wa,dataTool:ba,dependencies:Ea,disConnect:Ga,disconnect:Aa,dispose:Oa,env:wr,extendChartView:kn,extendComponentModel:Nn,extendComponentView:Vn,extendSeriesModel:Un,format:Bn,getCoordinateSystemDimensions:Ba,getInstanceByDom:Ha,getInstanceById:Na,getMap:Va,graphic:On,helper:Sn,init:Ua,innerDrawElementOnCanvas:Ar,matrix:ua,number:Gn,parseGeoJSON:or,parseGeoJson:or,registerAction:ka,registerCoordinateSystem:Fa,registerLayout:Za,registerLoading:Ya,registerLocale:la,registerMap:qa,registerPostInit:Xa,registerPostUpdate:Wa,registerPreprocessor:za,registerProcessor:ja,registerTheme:Ja,registerTransform:Ka,registerUpdateLifecycle:$a,registerVisual:Qa,setCanvasCreator:en,setPlatformAPI:ha,throttle:on,time:An,use:Or,util:Hn,vector:ca,version:rn,zrUtil:ga,zrender:tn},Symbol.toStringTag,{value:"Module"}));var N=pa.CMD;function K(n,e){return Math.abs(n-e)<1e-5}function He(n){var e=n.data,t=n.len(),r=[],a,i=0,s=0,o=0,v=0;function f(P,E){a&&a.length>2&&r.push(a),a=[P,E]}function d(P,E,G,w){K(P,G)&&K(E,w)||a.push(P,E,G,w,G,w)}function u(P,E,G,w,O,B){var H=Math.abs(E-P),U=Math.tan(H/4)*4/3,Y=E<P?-1:1,Ye=Math.cos(P),qe=Math.sin(P),Xe=Math.cos(E),We=Math.sin(E),Yr=Ye*O+G,qr=qe*B+w,ze=Xe*O+G,je=We*B+w,Je=O*U*Y,Ke=B*U*Y;a.push(Yr-Je*qe,qr+Ke*Ye,ze+Je*We,je-Ke*Xe,ze,je)}for(var l,h,y,g,c=0;c<t;){var p=e[c++],m=c===1;switch(m&&(i=e[c],s=e[c+1],o=i,v=s,(p===N.L||p===N.C||p===N.Q)&&(a=[o,v])),p){case N.M:i=o=e[c++],s=v=e[c++],f(o,v);break;case N.L:l=e[c++],h=e[c++],d(i,s,l,h),i=l,s=h;break;case N.C:a.push(e[c++],e[c++],e[c++],e[c++],i=e[c++],s=e[c++]);break;case N.Q:l=e[c++],h=e[c++],y=e[c++],g=e[c++],a.push(i+2/3*(l-i),s+2/3*(h-s),y+2/3*(l-y),g+2/3*(h-g),y,g),i=y,s=g;break;case N.A:var _=e[c++],x=e[c++],M=e[c++],L=e[c++],I=e[c++],T=e[c++]+I;c+=1;var R=!e[c++];l=Math.cos(I)*M+_,h=Math.sin(I)*L+x,m?(o=l,v=h,f(o,v)):d(i,s,l,h),i=Math.cos(T)*M+_,s=Math.sin(T)*L+x;for(var C=(R?-1:1)*Math.PI/2,D=I;R?D>T:D<T;D+=C){var b=R?Math.max(D+C,T):Math.min(D+C,T);u(D,b,_,x,M,L)}break;case N.R:o=i=e[c++],v=s=e[c++],l=o+e[c++],h=v+e[c++],f(l,v),d(l,v,l,h),d(l,h,o,h),d(o,h,o,v),d(o,v,l,v);break;case N.Z:a&&d(i,s,o,v),i=o,s=v;break}}return a&&a.length>2&&r.push(a),r}function Ne(n,e,t,r,a,i,s,o,v,f){if(K(n,t)&&K(e,r)&&K(a,s)&&K(i,o)){v.push(s,o);return}var d=2/f,u=d*d,l=s-n,h=o-e,y=Math.sqrt(l*l+h*h);l/=y,h/=y;var g=t-n,c=r-e,p=a-s,m=i-o,_=g*g+c*c,x=p*p+m*m;if(_<u&&x<u){v.push(s,o);return}var M=l*g+h*c,L=-l*p-h*m,I=_-M*M,T=x-L*L;if(I<u&&M>=0&&T<u&&L>=0){v.push(s,o);return}var R=[],C=[];le(n,t,a,s,.5,R),le(e,r,i,o,.5,C),Ne(R[0],C[0],R[1],C[1],R[2],C[2],R[3],C[3],v,f),Ne(R[4],C[4],R[5],C[5],R[6],C[6],R[7],C[7],v,f)}function zn(n,e){var t=He(n),r=[];e=e||1;for(var a=0;a<t.length;a++){var i=t[a],s=[],o=i[0],v=i[1];s.push(o,v);for(var f=2;f<i.length;){var d=i[f++],u=i[f++],l=i[f++],h=i[f++],y=i[f++],g=i[f++];Ne(o,v,d,u,l,h,y,g,s,e),o=y,v=g}r.push(s)}return r}function Nr(n,e,t){var r=n[e],a=n[1-e],i=Math.abs(r/a),s=Math.ceil(Math.sqrt(i*t)),o=Math.floor(t/s);o===0&&(o=1,s=t);for(var v=[],f=0;f<s;f++)v.push(o);var d=s*o,u=t-d;if(u>0)for(var f=0;f<u;f++)v[f%s]+=1;return v}function fr(n,e,t){for(var r=n.r0,a=n.r,i=n.startAngle,s=n.endAngle,o=Math.abs(s-i),v=o*a,f=a-r,d=v>Math.abs(f),u=Nr([v,f],d?0:1,e),l=(d?o:f)/u.length,h=0;h<u.length;h++)for(var y=(d?f:o)/u[h],g=0;g<u[h];g++){var c={};d?(c.startAngle=i+l*h,c.endAngle=i+l*(h+1),c.r0=r+y*g,c.r=r+y*(g+1)):(c.startAngle=i+y*g,c.endAngle=i+y*(g+1),c.r0=r+l*h,c.r=r+l*(h+1)),c.clockwise=n.clockwise,c.cx=n.cx,c.cy=n.cy,t.push(c)}}function jn(n,e,t){for(var r=n.width,a=n.height,i=r>a,s=Nr([r,a],i?0:1,e),o=i?"width":"height",v=i?"height":"width",f=i?"x":"y",d=i?"y":"x",u=n[o]/s.length,l=0;l<s.length;l++)for(var h=n[v]/s[l],y=0;y<s[l];y++){var g={};g[f]=l*u,g[d]=y*h,g[o]=u,g[v]=h,g.x+=n.x,g.y+=n.y,t.push(g)}}function dr(n,e,t,r){return n*r-t*e}function Jn(n,e,t,r,a,i,s,o){var v=t-n,f=r-e,d=s-a,u=o-i,l=dr(d,u,v,f);if(Math.abs(l)<1e-6)return null;var h=n-a,y=e-i,g=dr(h,y,d,u)/l;return g<0||g>1?null:new W(g*v+n,g*f+e)}function Kn(n,e,t){var r=new W;W.sub(r,t,e),r.normalize();var a=new W;W.sub(a,n,e);var i=a.dot(r);return i}function j(n,e){var t=n[n.length-1];t&&t[0]===e[0]&&t[1]===e[1]||n.push(e)}function $n(n,e,t){for(var r=n.length,a=[],i=0;i<r;i++){var s=n[i],o=n[(i+1)%r],v=Jn(s[0],s[1],o[0],o[1],e.x,e.y,t.x,t.y);v&&a.push({projPt:Kn(v,e,t),pt:v,idx:i})}if(a.length<2)return[{points:n},{points:n}];a.sort(function(c,p){return c.projPt-p.projPt});var f=a[0],d=a[a.length-1];if(d.idx<f.idx){var u=f;f=d,d=u}for(var l=[f.pt.x,f.pt.y],h=[d.pt.x,d.pt.y],y=[l],g=[h],i=f.idx+1;i<=d.idx;i++)j(y,n[i].slice());j(y,h),j(y,l);for(var i=d.idx+1;i<=f.idx+r;i++)j(g,n[i%r].slice());return j(g,l),j(g,h),[{points:y},{points:g}]}function ur(n){var e=n.points,t=[],r=[];br(e,t,r);var a=new V(t[0],t[1],r[0]-t[0],r[1]-t[1]),i=a.width,s=a.height,o=a.x,v=a.y,f=new W,d=new W;return i>s?(f.x=d.x=o+i/2,f.y=v,d.y=v+s):(f.y=d.y=v+s/2,f.x=o,d.x=o+i),$n(e,f,d)}function he(n,e,t,r){if(t===1)r.push(e);else{var a=Math.floor(t/2),i=n(e);he(n,i[0],a,r),he(n,i[1],t-a,r)}return r}function Qn(n,e){for(var t=[],r=0;r<e;r++)t.push(ke(n));return t}function ei(n,e){e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel}function ri(n){for(var e=[],t=0;t<n.length;)e.push([n[t++],n[t++]]);return e}function ti(n,e){var t=[],r=n.shape,a;switch(n.type){case"rect":jn(r,e,t),a=Sr;break;case"sector":fr(r,e,t),a=De;break;case"circle":fr({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),a=De;break;default:var i=n.getComputedTransform(),s=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,o=Z(zn(n.getUpdatedPathProxy(),s),function(p){return ri(p)}),v=o.length;if(v===0)he(ur,{points:o[0]},e,t);else if(v===e)for(var f=0;f<v;f++)t.push({points:o[f]});else{var d=0,u=Z(o,function(p){var m=[],_=[];br(p,m,_);var x=(_[1]-m[1])*(_[0]-m[0]);return d+=x,{poly:p,area:x}});u.sort(function(p,m){return m.area-p.area});for(var l=e,f=0;f<v;f++){var h=u[f];if(l<=0)break;var y=f===v-1?l:Math.ceil(h.area/d*e);y<0||(he(ur,{points:h.poly},y,t),l-=y)}}a=Cr;break}if(!a)return Qn(n,e);for(var g=[],f=0;f<t.length;f++){var c=new a;c.setShape(t[f]),ei(n,c),g.push(c)}return g}function ai(n,e){var t=n.length,r=e.length;if(t===r)return[n,e];for(var a=[],i=[],s=t<r?n:e,o=Math.min(t,r),v=Math.abs(r-t)/6,f=(o-2)/6,d=Math.ceil(v/f)+1,u=[s[0],s[1]],l=v,h=2;h<o;){var y=s[h-2],g=s[h-1],c=s[h++],p=s[h++],m=s[h++],_=s[h++],x=s[h++],M=s[h++];if(l<=0){u.push(c,p,m,_,x,M);continue}for(var L=Math.min(l,d-1)+1,I=1;I<=L;I++){var T=I/L;le(y,c,m,x,T,a),le(g,p,_,M,T,i),y=a[3],g=i[3],u.push(a[1],i[1],a[2],i[2],y,g),c=a[5],p=i[5],m=a[6],_=i[6]}l-=L-1}return s===n?[u,e]:[n,u]}function lr(n,e){for(var t=n.length,r=n[t-2],a=n[t-1],i=[],s=0;s<e.length;)i[s++]=r,i[s++]=a;return i}function ni(n,e){for(var t,r,a,i=[],s=[],o=0;o<Math.max(n.length,e.length);o++){var v=n[o],f=e[o],d=void 0,u=void 0;v?f?(t=ai(v,f),d=t[0],u=t[1],r=d,a=u):(u=lr(a||v,v),d=v):(d=lr(r||f,f),u=f),i.push(d),s.push(u)}return[i,s]}function hr(n){for(var e=0,t=0,r=0,a=n.length,i=0,s=a-2;i<a;s=i,i+=2){var o=n[s],v=n[s+1],f=n[i],d=n[i+1],u=o*d-f*v;e+=u,t+=(o+f)*u,r+=(v+d)*u}return e===0?[n[0]||0,n[1]||0]:[t/e/3,r/e/3,e]}function ii(n,e,t,r){for(var a=(n.length-2)/6,i=1/0,s=0,o=n.length,v=o-2,f=0;f<a;f++){for(var d=f*6,u=0,l=0;l<o;l+=2){var h=l===0?d:(d+l-2)%v+2,y=n[h]-t[0],g=n[h+1]-t[1],c=e[l]-r[0],p=e[l+1]-r[1],m=c-y,_=p-g;u+=m*m+_*_}u<i&&(i=u,s=f)}return s}function si(n){for(var e=[],t=n.length,r=0;r<t;r+=2)e[r]=n[t-r-2],e[r+1]=n[t-r-1];return e}function oi(n,e,t,r){for(var a=[],i,s=0;s<n.length;s++){var o=n[s],v=e[s],f=hr(o),d=hr(v);i==null&&(i=f[2]<0!=d[2]<0);var u=[],l=[],h=0,y=1/0,g=[],c=o.length;i&&(o=si(o));for(var p=ii(o,v,f,d)*6,m=c-2,_=0;_<m;_+=2){var x=(p+_)%m+2;u[_+2]=o[x]-f[0],u[_+3]=o[x+1]-f[1]}if(u[0]=o[p]-f[0],u[1]=o[p+1]-f[1],t>0)for(var M=r/t,L=-r/2;L<=r/2;L+=M){for(var I=Math.sin(L),T=Math.cos(L),R=0,_=0;_<o.length;_+=2){var C=u[_],D=u[_+1],b=v[_]-d[0],P=v[_+1]-d[1],E=b*T-P*I,G=b*I+P*T;g[_]=E,g[_+1]=G;var w=E-C,O=G-D;R+=w*w+O*O}if(R<y){y=R,h=L;for(var B=0;B<g.length;B++)l[B]=g[B]}}else for(var H=0;H<c;H+=2)l[H]=v[H]-d[0],l[H+1]=v[H+1]-d[1];a.push({from:u,to:l,fromCp:f,toCp:d,rotation:-h})}return a}function ce(n){return n.__isCombineMorphing}var Vr="__mOriginal_";function ge(n,e,t){var r=Vr+e,a=n[r]||n[e];n[r]||(n[r]=n[e]);var i=t.replace,s=t.after,o=t.before;n[e]=function(){var v=arguments,f;return o&&o.apply(this,v),i?f=i.apply(this,v):f=a.apply(this,v),s&&s.apply(this,v),f}}function re(n,e){var t=Vr+e;n[t]&&(n[e]=n[t],n[t]=null)}function cr(n,e){for(var t=0;t<n.length;t++)for(var r=n[t],a=0;a<r.length;){var i=r[a],s=r[a+1];r[a++]=e[0]*i+e[2]*s+e[4],r[a++]=e[1]*i+e[3]*s+e[5]}}function Ur(n,e){var t=n.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),a=ni(He(t),He(r)),i=a[0],s=a[1],o=n.getComputedTransform(),v=e.getComputedTransform();function f(){this.transform=null}o&&cr(i,o),v&&cr(s,v),ge(e,"updateTransform",{replace:f}),e.transform=null;var d=oi(i,s,10,Math.PI),u=[];ge(e,"buildPath",{replace:function(l){for(var h=e.__morphT,y=1-h,g=[],c=0;c<d.length;c++){var p=d[c],m=p.from,_=p.to,x=p.rotation*h,M=p.fromCp,L=p.toCp,I=Math.sin(x),T=Math.cos(x);_a(g,M,L,h);for(var R=0;R<m.length;R+=2){var C=m[R],D=m[R+1],b=_[R],P=_[R+1],E=C*y+b*h,G=D*y+P*h;u[R]=E*T-G*I+g[0],u[R+1]=E*I+G*T+g[1]}var w=u[0],O=u[1];l.moveTo(w,O);for(var R=2;R<m.length;){var b=u[R++],P=u[R++],B=u[R++],H=u[R++],U=u[R++],Y=u[R++];w===b&&O===P&&B===U&&H===Y?l.lineTo(U,Y):l.bezierCurveTo(b,P,B,H,U,Y),w=U,O=Y}}}})}function Ze(n,e,t){if(!n||!e)return e;var r=t.done,a=t.during;Ur(n,e),e.__morphT=0;function i(){re(e,"buildPath"),re(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},F({during:function(s){e.dirtyShape(),a&&a(s)},done:function(){i(),r&&r()}},t)),e}function vi(n,e,t,r,a,i){var s=16;n=a===t?0:Math.round(32767*(n-t)/(a-t)),e=i===r?0:Math.round(32767*(e-r)/(i-r));for(var o=0,v,f=(1<<s)/2;f>0;f/=2){var d=0,u=0;(n&f)>0&&(d=1),(e&f)>0&&(u=1),o+=f*f*(3*d^u),u===0&&(d===1&&(n=f-1-n,e=f-1-e),v=n,n=e,e=v)}return o}function pe(n){var e=1/0,t=1/0,r=-1/0,a=-1/0,i=Z(n,function(o){var v=o.getBoundingRect(),f=o.getComputedTransform(),d=v.x+v.width/2+(f?f[4]:0),u=v.y+v.height/2+(f?f[5]:0);return e=Math.min(d,e),t=Math.min(u,t),r=Math.max(d,r),a=Math.max(u,a),[d,u]}),s=Z(i,function(o,v){return{cp:o,z:vi(o[0],o[1],e,t,r,a),path:n[v]}});return s.sort(function(o,v){return o.z-v.z}).map(function(o){return o.path})}function kr(n){return ti(n.path,n.count)}function Ve(){return{fromIndividuals:[],toIndividuals:[],count:0}}function fi(n,e,t){var r=[];function a(M){for(var L=0;L<M.length;L++){var I=M[L];ce(I)?a(I.childrenRef()):I instanceof te&&r.push(I)}}a(n);var i=r.length;if(!i)return Ve();var s=t.dividePath||kr,o=s({path:e,count:i});if(o.length!==i)return console.error("Invalid morphing: unmatched splitted path"),Ve();r=pe(r),o=pe(o);for(var v=t.done,f=t.during,d=t.individualDelay,u=new Dr,l=0;l<i;l++){var h=r[l],y=o[l];y.parent=e,y.copyTransform(u),d||Ur(h,y)}e.__isCombineMorphing=!0,e.childrenRef=function(){return o};function g(M){for(var L=0;L<o.length;L++)o[L].addSelfToZr(M)}ge(e,"addSelfToZr",{after:function(M){g(M)}}),ge(e,"removeSelfFromZr",{after:function(M){for(var L=0;L<o.length;L++)o[L].removeSelfFromZr(M)}});function c(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,re(e,"addSelfToZr"),re(e,"removeSelfFromZr")}var p=o.length;if(d)for(var m=p,_=function(){m--,m===0&&(c(),v&&v())},l=0;l<p;l++){var x=d?F({delay:(t.delay||0)+d(l,p,r[l],o[l]),done:_},t):t;Ze(r[l],o[l],x)}else e.__morphT=0,e.animateTo({__morphT:1},F({during:function(M){for(var L=0;L<p;L++){var I=o[L];I.__morphT=e.__morphT,I.dirtyShape()}f&&f(M)},done:function(){c();for(var M=0;M<n.length;M++)re(n[M],"updateTransform");v&&v()}},t));return e.__zr&&g(e.__zr),{fromIndividuals:r,toIndividuals:o,count:p}}function di(n,e,t){var r=e.length,a=[],i=t.dividePath||kr;function s(h){for(var y=0;y<h.length;y++){var g=h[y];ce(g)?s(g.childrenRef()):g instanceof te&&a.push(g)}}if(ce(n)){s(n.childrenRef());var o=a.length;if(o<r)for(var v=0,f=o;f<r;f++)a.push(ke(a[v++%o]));a.length=r}else{a=i({path:n,count:r});for(var d=n.getComputedTransform(),f=0;f<a.length;f++)a[f].setLocalTransform(d);if(a.length!==r)return console.error("Invalid morphing: unmatched splitted path"),Ve()}a=pe(a),e=pe(e);for(var u=t.individualDelay,f=0;f<r;f++){var l=u?F({delay:(t.delay||0)+u(f,r,a[f],e[f])},t):t;Ze(a[f],e[f],l)}return{fromIndividuals:a,toIndividuals:e,count:e.length}}function gr(n){return $(n[0])}function pr(n,e){for(var t=[],r=n.length,a=0;a<r;a++)t.push({one:n[a],many:[]});for(var a=0;a<e.length;a++){var i=e[a].length,s=void 0;for(s=0;s<i;s++)t[s%r].many.push(e[a][s])}for(var o=0,a=r-1;a>=0;a--)if(!t[a].many.length){var v=t[o].many;if(v.length<=1)if(o)o=0;else return t;var i=v.length,f=Math.ceil(i/2);t[a].many=v.slice(f,i),t[o].many=v.slice(0,f),o++}return t}var ui={clone:function(n){for(var e=[],t=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var a=ke(n.path);a.setStyle("opacity",t),e.push(a)}return e},split:null};function Te(n,e,t,r,a,i){if(!n.length||!e.length)return;var s=Fe("update",r,a);if(!(s&&s.duration>0))return;var o=r.getModel("universalTransition").get("delay"),v=Object.assign({setToFinal:!0},s),f,d;gr(n)&&(f=n,d=e),gr(e)&&(f=e,d=n);function u(p,m,_,x,M){var L=p.many,I=p.one;if(L.length===1&&!M){var T=m?L[0]:I,R=m?I:L[0];if(ce(T))u({many:[T],one:R},!0,_,x,!0);else{var C=o?F({delay:o(_,x)},v):v;Ze(T,R,C),i(T,R,T,R,C)}}else for(var D=F({dividePath:ui[t],individualDelay:o&&function(O,B,H,U){return o(O+_,x)}},v),b=m?fi(L,I,D):di(I,L,D),P=b.fromIndividuals,E=b.toIndividuals,G=P.length,w=0;w<G;w++){var C=o?F({delay:o(w,G)},v):v;i(P[w],E[w],m?L[w]:p.one,m?p.one:L[w],C)}}for(var l=f?f===n:n.length>e.length,h=f?pr(d,f):pr(l?e:n,[l?n:e]),y=0,g=0;g<h.length;g++)y+=h[g].many.length;for(var c=0,g=0;g<h.length;g++)u(h[g],l,c,y),c+=h[g].many.length}function X(n){if(!n)return[];if($(n)){for(var e=[],t=0;t<n.length;t++)e.push(X(n[t]));return e}var r=[];return n.traverse(function(a){a instanceof te&&!a.disableMorphing&&!a.invisible&&!a.ignore&&r.push(a)}),r}var Fr=1e4,li=_e();function hi(n){for(var e=n.dimensions,t=0;t<e.length;t++){var r=n.getDimensionInfo(e[t]);if(r&&r.otherDims.itemGroupId===0)return e[t]}}function _r(n){var e=[];return S(n,function(t){var r=t.data;if(!(r.count()>Fr))for(var a=r.getIndices(),i=hi(r),s=0;s<a.length;s++)e.push({dataGroupId:t.dataGroupId,data:r,dim:t.dim||i,divide:t.divide,dataIndex:s})}),e}function Re(n,e,t){n.traverse(function(r){r instanceof te&&fe(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function Ce(n){if(n.parent){var e=n.getComputedTransform();n.setLocalTransform(e),n.parent.remove(n)}}function J(n){n.stopAnimation(),n.isGroup&&n.traverse(function(e){e.stopAnimation()})}function ci(n,e,t){var r=Fe("update",t,e);r&&n.traverse(function(a){if(a instanceof ya){var i=ma(a);i&&a.animateFrom({style:i},r)}})}function gi(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var a=n[r],i=e[r];if(a.data.getId(a.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}function Zr(n,e,t){var r=_r(n),a=_r(e);function i(p,m,_,x,M){(_||p)&&m.animateFrom({style:_&&_!==p?de(de({},_.style),p.style):p.style},M)}function s(p){for(var m=0;m<p.length;m++)if(p[m].dim)return p[m].dim}var o=s(r),v=s(a),f=!1;function d(p,m){return function(_){var x=_.data,M=_.dataIndex;if(m)return x.getId(M);var L=_.dataGroupId,I=p?o||v:v||o,T=I&&x.getDimensionInfo(I),R=T&&T.ordinalMeta;if(T){var C=x.get(T.name,M);return R&&R.categories[C]||C+""}var D=x.getRawDataItem(M);return D&&D.groupId?D.groupId+"":L||x.getId(M)}}var u=gi(r,a),l={};if(!u)for(var h=0;h<a.length;h++){var y=a[h],g=y.data.getItemGraphicEl(y.dataIndex);g&&(l[g.id]=!0)}function c(p,m){var _=r[m],x=a[p],M=x.data.hostModel,L=_.data.getItemGraphicEl(_.dataIndex),I=x.data.getItemGraphicEl(x.dataIndex);if(L===I){I&&ci(I,x.dataIndex,M);return}L&&l[L.id]||I&&(J(I),L?(J(L),Ce(L),f=!0,Te(X(L),X(I),x.divide,M,p,i)):Re(I,M,p))}new er(r,a,d(!0,u),d(!1,u),null,"multiple").update(c).updateManyToOne(function(p,m){var _=a[p],x=_.data,M=x.hostModel,L=x.getItemGraphicEl(_.dataIndex),I=z(Z(m,function(T){return r[T].data.getItemGraphicEl(r[T].dataIndex)}),function(T){return T&&T!==L&&!l[T.id]});L&&(J(L),I.length?(S(I,function(T){J(T),Ce(T)}),f=!0,Te(X(I),X(L),_.divide,M,p,i)):Re(L,M,_.dataIndex))}).updateOneToMany(function(p,m){var _=r[m],x=_.data.getItemGraphicEl(_.dataIndex);if(!(x&&l[x.id])){var M=z(Z(p,function(I){return a[I].data.getItemGraphicEl(a[I].dataIndex)}),function(I){return I&&I!==x}),L=a[p[0]].data.hostModel;M.length&&(S(M,function(I){return J(I)}),x?(J(x),Ce(x),f=!0,Te(X(x),X(M),_.divide,L,p[0],i)):S(M,function(I){return Re(I,L,p[0])}))}}).updateManyToMany(function(p,m){new er(m,p,function(_){return r[_].data.getId(r[_].dataIndex)},function(_){return a[_].data.getId(a[_].dataIndex)}).update(function(_,x){c(p[_],m[x])}).execute()}).execute(),f&&S(e,function(p){var m=p.data,_=m.hostModel,x=_&&t.getViewOfSeriesModel(_),M=Fe("update",_,0);x&&_.isAnimationEnabled()&&M&&M.duration>0&&x.group.traverse(function(L){L instanceof te&&!L.animators.length&&L.animateFrom({style:{opacity:0}},M)})})}function yr(n){var e=n.getModel("universalTransition").get("seriesKey");return e||n.id}function mr(n){return $(n)?n.sort().join(","):n}function k(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function pi(n,e){var t=me(),r=me(),a=me();return S(n.oldSeries,function(i,s){var o=n.oldDataGroupIds[s],v=n.oldData[s],f=yr(i),d=mr(f);r.set(d,{dataGroupId:o,data:v}),$(f)&&S(f,function(u){a.set(u,{key:d,dataGroupId:o,data:v})})}),S(e.updatedSeries,function(i){if(i.isUniversalTransitionEnabled()&&i.isAnimationEnabled()){var s=i.get("dataGroupId"),o=i.getData(),v=yr(i),f=mr(v),d=r.get(f);if(d)t.set(f,{oldSeries:[{dataGroupId:d.dataGroupId,divide:k(d.data),data:d.data}],newSeries:[{dataGroupId:s,divide:k(o),data:o}]});else if($(v)){var u=[];S(v,function(y){var g=r.get(y);g.data&&u.push({dataGroupId:g.dataGroupId,divide:k(g.data),data:g.data})}),u.length&&t.set(f,{oldSeries:u,newSeries:[{dataGroupId:s,data:o,divide:k(o)}]})}else{var l=a.get(v);if(l){var h=t.get(l.key);h||(h={oldSeries:[{dataGroupId:l.dataGroupId,data:l.data,divide:k(l.data)}],newSeries:[]},t.set(l.key,h)),h.newSeries.push({dataGroupId:s,data:o,divide:k(o)})}}}}),t}function Lr(n,e){for(var t=0;t<n.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===n[t].seriesIndex||e.seriesId!=null&&e.seriesId===n[t].id;if(r)return t}}function _i(n,e,t,r){var a=[],i=[];S(ee(n.from),function(s){var o=Lr(e.oldSeries,s);o>=0&&a.push({dataGroupId:e.oldDataGroupIds[o],data:e.oldData[o],divide:k(e.oldData[o]),dim:s.dimension})}),S(ee(n.to),function(s){var o=Lr(t.updatedSeries,s);if(o>=0){var v=t.updatedSeries[o].getData();i.push({dataGroupId:e.oldDataGroupIds[o],data:v,divide:k(v),dim:s.dimension})}}),a.length>0&&i.length>0&&Zr(a,i,r)}function yi(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){S(ee(r.seriesTransition),function(a){S(ee(a.to),function(i){for(var s=r.updatedSeries,o=0;o<s.length;o++)(i.seriesIndex!=null&&i.seriesIndex===s[o].seriesIndex||i.seriesId!=null&&i.seriesId===s[o].id)&&(s[o][ye]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(e,t,r){var a=li(t);if(a.oldSeries&&r.updatedSeries&&r.optionChanged){var i=r.seriesTransition;if(i)S(ee(i),function(h){_i(h,a,r,t)});else{var s=pi(a,r);S(s.keys(),function(h){var y=s.get(h);Zr(y.oldSeries,y.newSeries,t)})}S(r.updatedSeries,function(h){h[ye]&&(h[ye]=!1)})}for(var o=e.getSeries(),v=a.oldSeries=[],f=a.oldDataGroupIds=[],d=a.oldData=[],u=0;u<o.length;u++){var l=o[u].getData();l.count()<Fr&&(v.push(o[u]),f.push(o[u].get("dataGroupId")),d.push(l))}})}function xr(n,e,t){var r=xa.createCanvas(),a=e.getWidth(),i=e.getHeight(),s=r.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=a+"px",s.height=i+"px",r.setAttribute("data-zr-dom-id",n)),r.width=a*t,r.height=i*t,r}var mi=function(n){Ue(e,n);function e(t,r,a){var i=n.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null;var s;a=a||Gr,typeof t=="string"?s=xr(t,r,a):Pr(t)&&(s=t,t=s.id),i.id=t,i.dom=s;var o=s.style;return o&&(Er(s),s.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),i.painter=r,i.dpr=a,i}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=xr("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,a,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],o=this.maxRepaintRectCount,v=!1,f=new V(0,0,0,0);function d(m){if(!(!m.isFinite()||m.isZero()))if(s.length===0){var _=new V(0,0,0,0);_.copy(m),s.push(_)}else{for(var x=!1,M=1/0,L=0,I=0;I<s.length;++I){var T=s[I];if(T.intersect(m)){var R=new V(0,0,0,0);R.copy(T),R.union(m),s[I]=R,x=!0;break}else if(v){f.copy(m),f.union(T);var C=m.width*m.height,D=T.width*T.height,b=f.width*f.height,P=b-C-D;P<M&&(M=P,L=I)}}if(v&&(s[L].union(m),x=!0),!x){var _=new V(0,0,0,0);_.copy(m),s.push(_)}v||(v=s.length>=o)}}for(var u=this.__startIndex;u<this.__endIndex;++u){var l=t[u];if(l){var h=l.shouldBePainted(a,i,!0,!0),y=l.__isRendered&&(l.__dirty&Oe||!h)?l.getPrevPaintRect():null;y&&d(y);var g=h&&(l.__dirty&Oe||!l.__isRendered)?l.getPaintRect():null;g&&d(g)}}for(var u=this.__prevStartIndex;u<this.__prevEndIndex;++u){var l=r[u],h=l.shouldBePainted(a,i,!0,!0);if(l&&(!h||!l.__zr)&&l.__isRendered){var y=l.getPrevPaintRect();y&&d(y)}}var c;do{c=!1;for(var u=0;u<s.length;){if(s[u].isZero()){s.splice(u,1);continue}for(var p=u+1;p<s.length;)s[u].intersect(s[p])?(c=!0,s[u].union(s[p]),s.splice(p,1)):p++;u++}}while(c);return this._paintRects=s,s},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var a=this.dpr,i=this.dom,s=i.style,o=this.domBack;s&&(s.width=t+"px",s.height=r+"px"),i.width=t*a,i.height=r*a,o&&(o.width=t*a,o.height=r*a,a!==1&&this.ctxBack.scale(a,a))},e.prototype.clear=function(t,r,a){var i=this.dom,s=this.ctx,o=i.width,v=i.height;r=r||this.clearColor;var f=this.motionBlur&&!t,d=this.lastFrameAlpha,u=this.dpr,l=this;f&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,o/u,v/u));var h=this.domBack;function y(g,c,p,m){if(s.clearRect(g,c,p,m),r&&r!=="transparent"){var _=void 0;if(Ia(r)){var x=r.global||r.__width===p&&r.__height===m;_=x&&r.__canvasGradient||an(s,r,{x:0,y:0,width:p,height:m}),r.__canvasGradient=_,r.__width=p,r.__height=m}else Ma(r)&&(r.scaleX=r.scaleX||u,r.scaleY=r.scaleY||u,_=nn(s,r,{dirty:function(){l.setUnpainted(),l.__painter.refresh()}}));s.save(),s.fillStyle=_||r,s.fillRect(g,c,p,m),s.restore()}f&&(s.save(),s.globalAlpha=d,s.drawImage(h,g,c,p,m),s.restore())}!a||f?y(0,0,o,v):a.length&&S(a,function(g){y(g.x*u,g.y*u,g.width*u,g.height*u)})},e}(La);const Se=mi;var Ir=1e5,q=314159,oe=.01,Li=.001;function xi(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function Ii(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var Mi=function(){function n(e,t,r,a){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=de({},r||{}),this.dpr=r.devicePixelRatio||Gr,this._singleCanvas=i,this.root=e;var s=e.style;s&&(Er(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var v=this._layers;if(i){var d=e,u=d.width,l=d.height;r.width!=null&&(u=r.width),r.height!=null&&(l=r.height),this.dpr=r.devicePixelRatio||1,d.width=u*this.dpr,d.height=l*this.dpr,this._width=u,this._height=l;var h=new Se(d,this,this.dpr);h.__builtin__=!0,h.initContext(),v[q]=h,h.zlevel=q,o.push(q),this._domRoot=e}else{this._width=ae(e,0,r),this._height=ae(e,1,r);var f=this._domRoot=Ii(this._width,this._height);e.appendChild(f)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,a=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var i=0;i<a.length;i++){var s=a[i],o=this._layers[s];if(!o.__builtin__&&o.refresh){var v=i===0?this._backgroundColor:null;o.refresh(v)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var a={inHover:!0,viewWidth:this._width,viewHeight:this._height},i,s=0;s<t;s++){var o=e[s];o.__inHover&&(r||(r=this._hoverlayer=this.getLayer(Ir)),i||(i=r.ctx,i.save()),ne(i,o,a,s===t-1))}i&&i.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(Ir)},n.prototype.paintOne=function(e,t){Ar(e,t)},n.prototype._paintList=function(e,t,r,a){if(this._redrawId===a){r=r||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t,r),s=i.finished,o=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),s)this.eachLayer(function(f){f.afterBrush&&f.afterBrush()});else{var v=this;sn(function(){v._paintList(e,t,r,a)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(q).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(a){a.virtual&&e.drawImage(a.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var a=this,i=[],s=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var v=this._zlevelList[o],f=this._layers[v];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||r)&&i.push(f)}for(var d=!0,u=!1,l=function(g){var c=i[g],p=c.ctx,m=s&&c.createRepaintRects(e,t,h._width,h._height),_=r?c.__startIndex:c.__drawIndex,x=!r&&c.incremental&&Date.now,M=x&&Date.now(),L=c.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(c.__startIndex===c.__endIndex)c.clear(!1,L,m);else if(_===c.__startIndex){var I=e[_];(!I.incremental||!I.notClear||r)&&c.clear(!1,L,m)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=c.__startIndex);var T,R=function(P){var E={inHover:!1,allClipped:!1,prevEl:null,viewWidth:a._width,viewHeight:a._height};for(T=_;T<c.__endIndex;T++){var G=e[T];if(G.__inHover&&(u=!0),a._doPaintEl(G,c,s,P,E,T===c.__endIndex-1),x){var w=Date.now()-M;if(w>15)break}}E.prevElClipPaths&&p.restore()};if(m)if(m.length===0)T=c.__endIndex;else for(var C=h.dpr,D=0;D<m.length;++D){var b=m[D];p.save(),p.beginPath(),p.rect(b.x*C,b.y*C,b.width*C,b.height*C),p.clip(),R(b),p.restore()}else p.save(),R(),p.restore();c.__drawIndex=T,c.__drawIndex<c.__endIndex&&(d=!1)},h=this,y=0;y<i.length;y++)l(y);return wr.wxa&&S(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:d,needsRefreshHover:u}},n.prototype._doPaintEl=function(e,t,r,a,i,s){var o=t.ctx;if(r){var v=e.getPaintRect();(!a||v&&v.intersect(a))&&(ne(o,e,i,s),e.setPrevPaintRect(v))}else ne(o,e,i,s)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=q);var r=this._layers[e];return r||(r=new Se("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?Q(r,this._layerConfig[e],!0):this._layerConfig[e-oe]&&Q(r,this._layerConfig[e-oe],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,a=this._zlevelList,i=a.length,s=this._domRoot,o=null,v=-1;if(!r[e]&&xi(t)){if(i>0&&e>a[0]){for(v=0;v<i-1&&!(a[v]<e&&a[v+1]>e);v++);o=r[a[v]]}if(a.splice(v+1,0,e),r[e]=t,!t.virtual)if(o){var f=o.dom;f.nextSibling?s.insertBefore(t.dom,f.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom);t.__painter=this}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,a=0;a<r.length;a++){var i=r[a];e.call(t,this._layers[i],i)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,a=0;a<r.length;a++){var i=r[a],s=this._layers[i];s.__builtin__&&e.call(t,s,i)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,a=0;a<r.length;a++){var i=r[a],s=this._layers[i];s.__builtin__||e.call(t,s,i)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(u,l){u.__dirty=u.__used=!1});function t(u){i&&(i.__endIndex!==u&&(i.__dirty=!0),i.__endIndex=u)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var a=e[r];if(a.zlevel!==e[r-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var i=null,s=0,o,v;for(v=0;v<e.length;v++){var a=e[v],f=a.zlevel,d=void 0;o!==f&&(o=f,s=0),a.incremental?(d=this.getLayer(f+Li,this._needsManuallyCompositing),d.incremental=!0,s=1):d=this.getLayer(f+(s>0?oe:0),this._needsManuallyCompositing),d.__builtin__||Ta("ZLevel "+f+" has been used by unkown layer "+d.id),d!==i&&(d.__used=!0,d.__startIndex!==v&&(d.__dirty=!0),d.__startIndex=v,d.incremental?d.__drawIndex=-1:d.__drawIndex=v,t(v),i=d),a.__dirty&Oe&&!a.__inHover&&(d.__dirty=!0,d.incremental&&d.__drawIndex<0&&(d.__drawIndex=v))}t(v),this.eachBuiltinLayer(function(u,l){!u.__used&&u.getElementCount()>0&&(u.__dirty=!0,u.__startIndex=u.__endIndex=u.__drawIndex=0),u.__dirty&&u.__drawIndex<0&&(u.__drawIndex=u.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,S(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?Q(r[e],t,!0):r[e]=t;for(var a=0;a<this._zlevelList.length;a++){var i=this._zlevelList[a];if(i===e||i===e+oe){var s=this._layers[i];Q(s,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,a=t[e];a&&(a.dom.parentNode.removeChild(a.dom),delete t[e],r.splice(ue(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var a=this._opts,i=this.root;if(e!=null&&(a.width=e),t!=null&&(a.height=t),e=ae(i,0,a),t=ae(i,1,a),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(q).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[q].dom;var t=new Se("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var a=t.dom.width,i=t.dom.height;this.eachLayer(function(u){u.__builtin__?r.drawImage(u.dom,0,0,a,i):u.renderToCanvas&&(r.save(),u.renderToCanvas(r),r.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),v=0,f=o.length;v<f;v++){var d=o[v];ne(r,d,s,v===f-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();const Ti=Mi;function Ri(n){n.registerPainter("canvas",Ti)}Or([Wn,yi,Ri]);export{Oi as default};
