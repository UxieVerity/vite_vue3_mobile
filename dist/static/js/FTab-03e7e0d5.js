import{K as oe,aB as we,aC as Me,D as $,aD as Ze,aE as qe,an as Xe,aF as Je,aG as Te,e as O,j as F,aH as xe,ae as Se,s as B,aI as Ie,f as ke,a0 as Ye,G as z,T as Ce,aJ as re,q as j,V as D,aK as Be,aL as Qe,k as a,y as R,h as te,v as E,w as Z,aM as ne,al as et,z as ce,aN as $e,r as tt,am as nt,aO as at,t as M,R as ve,aP as G,B as it,aQ as lt,aR as me,a1 as st,aS as ot,a5 as rt,a2 as ct,aT as dt,a4 as ut,x as Re,J as ft,p as ht,N as Pe,O as vt,l as mt,n as ge,av as gt,H as bt,I as pt,aa as K,aU as yt,a7 as _t,aV as wt,aW as Tt,ah as be,a8 as Y,a9 as _,at as xt,o as L,F as ae,aj as ie,a as le,ac as Q,ad as V,ab as St,aX as It,ay as kt}from"./plugins-libs-4a048428.js";import{S as Ct}from"./index-3de3b246.js";import{S as je,a as ze,G as Bt,b as $t}from"./index-9bbc0b10.js";import{T as Rt}from"./use-tab-status-bbec0545.js";function Pt(e,t,o){let r=0;const i=e.scrollLeft,n=o===0?1:Math.round(o*1e3/16);function c(){e.scrollLeft+=(t-i)/n,++r<n&&oe(c)}c()}function jt(e,t,o,r){let i=we(e);const n=i<t,c=o===0?1:Math.round(o*1e3/16),h=(t-i)/c;function v(){i+=h,(n&&i>t||!n&&i<t)&&(i=t),Me(e,i),n&&i<t||!n&&i>t?oe(v):r&&oe(r)}v()}function zt(){const e=$([]),t=[];return Ze(()=>{e.value=[]}),[e,r=>(t[r]||(t[r]=i=>{e.value[r]=i}),t[r])]}function Ae(e,t){if(!qe||!window.IntersectionObserver)return;const o=new IntersectionObserver(n=>{t(n[0].intersectionRatio>0)},{root:document.body}),r=()=>{e.value&&o.observe(e.value)},i=()=>{e.value&&o.unobserve(e.value)};Xe(i),Je(i),Te(r)}const[At,Nt]=O("sticky"),Ht={zIndex:R,position:te("top"),container:Object,offsetTop:E(0),offsetBottom:E(0)};var Lt=F({name:At,props:Ht,emits:["scroll","change"],setup(e,{emit:t,slots:o}){const r=$(),i=xe(r),n=Se({fixed:!1,width:0,height:0,transform:0}),c=$(!1),h=B(()=>Ie(e.position==="top"?e.offsetTop:e.offsetBottom)),v=B(()=>{if(c.value)return;const{fixed:s,height:y,width:d}=n;if(s)return{width:`${d}px`,height:`${y}px`}}),m=B(()=>{if(!n.fixed||c.value)return;const s=ke(Ye(e.zIndex),{width:`${n.width}px`,height:`${n.height}px`,[e.position]:`${h.value}px`});return n.transform&&(s.transform=`translate3d(0, ${n.transform}px, 0)`),s}),w=s=>t("scroll",{scrollTop:s,isFixed:n.fixed}),b=()=>{if(!r.value||re(r))return;const{container:s,position:y}=e,d=D(r),P=we(window);if(n.width=d.width,n.height=d.height,y==="top")if(s){const u=D(s),T=u.bottom-h.value-n.height;n.fixed=h.value>d.top&&u.bottom>0,n.transform=T<0?T:0}else n.fixed=h.value>d.top;else{const{clientHeight:u}=document.documentElement;if(s){const T=D(s),p=u-T.top-h.value-n.height;n.fixed=u-h.value<d.bottom&&u>T.top,n.transform=p<0?-p:0}else n.fixed=u-h.value<d.bottom}w(P)};return z(()=>n.fixed,s=>t("change",s)),Ce("scroll",b,{target:i,passive:!0}),Ae(r,b),z([Be,Qe],()=>{!r.value||re(r)||!n.fixed||(c.value=!0,j(()=>{const s=D(r);n.width=s.width,n.height=s.height,c.value=!1}))}),()=>{var s;return a("div",{ref:r,style:v.value},[a("div",{class:Nt({fixed:n.fixed&&!c.value}),style:m.value},[(s=o.default)==null?void 0:s.call(o)])])}}});const Ot=Z(Lt),[Ft,pe]=O("tabs");var Wt=F({name:Ft,props:{count:ne(Number),inited:Boolean,animated:Boolean,duration:ne(R),swipeable:Boolean,lazyRender:Boolean,currentIndex:ne(Number)},emits:["change"],setup(e,{emit:t,slots:o}){const r=$(),i=h=>t("change",h),n=()=>{var h;const v=(h=o.default)==null?void 0:h.call(o);return e.animated||e.swipeable?a(je,{ref:r,loop:!1,class:pe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:i},{default:()=>[v]}):v},c=h=>{const v=r.value;v&&v.state.active!==h&&v.swipeTo(h,{immediate:!e.inited})};return z(()=>e.currentIndex,c),et(()=>{c(e.currentIndex)}),ce({swipeRef:r}),()=>a("div",{class:pe("content",{animated:e.animated||e.swipeable})},[n()])}});const[Ne,ee]=O("tabs"),Dt={type:te("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:E(0),duration:E(.3),animated:Boolean,ellipsis:M,swipeable:Boolean,scrollspy:Boolean,offsetTop:E(0),background:String,lazyRender:M,lineWidth:R,lineHeight:R,beforeChange:Function,swipeThreshold:E(5),titleActiveColor:String,titleInactiveColor:String},He=Symbol(Ne);var Et=F({name:Ne,props:Dt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:t,slots:o}){let r,i,n;const c=$(),h=$(),v=$(),m=$(),w=$e(),b=xe(c),[s,y]=zt(),{children:d,linkChildren:P}=tt(He),u=Se({inited:!1,position:"",lineStyle:{},currentIndex:-1}),T=B(()=>d.length>+e.swipeThreshold||!e.ellipsis||e.shrink),p=B(()=>({borderColor:e.color,background:e.background})),k=(l,f)=>{var g;return(g=l.name)!=null?g:f},N=B(()=>{const l=d[u.currentIndex];if(l)return k(l,u.currentIndex)}),W=B(()=>Ie(e.offsetTop)),de=B(()=>e.sticky?W.value+r:0),U=l=>{const f=h.value,g=s.value;if(!T.value||!f||!g||!g[u.currentIndex])return;const I=g[u.currentIndex].$el,x=I.offsetLeft-(f.offsetWidth-I.offsetWidth)/2;Pt(f,x,l?0:+e.duration)},A=()=>{const l=u.inited;j(()=>{const f=s.value;if(!f||!f[u.currentIndex]||e.type!=="line"||re(c.value))return;const g=f[u.currentIndex].$el,{lineWidth:I,lineHeight:x}=e,C=g.offsetLeft+g.offsetWidth/2,H={width:ve(I),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(l&&(H.transitionDuration=`${e.duration}s`),G(x)){const J=ve(x);H.height=J,H.borderRadius=J}u.lineStyle=H})},Oe=l=>{const f=l<u.currentIndex?-1:1;for(;l>=0&&l<d.length;){if(!d[l].disabled)return l;l+=f}},q=(l,f)=>{const g=Oe(l);if(!G(g))return;const I=d[g],x=k(I,g),C=u.currentIndex!==null;u.currentIndex!==g&&(u.currentIndex=g,f||U(),A()),x!==e.active&&(t("update:active",x),C&&t("change",x,I.title)),n&&!e.scrollspy&&lt(Math.ceil(me(c.value)-W.value))},X=(l,f)=>{const g=d.find((x,C)=>k(x,C)===l),I=g?d.indexOf(g):0;q(I,f)},ue=(l=!1)=>{if(e.scrollspy){const f=d[u.currentIndex].$el;if(f&&b.value){const g=me(f,b.value)-de.value;i=!0,jt(b.value,g,l?0:+e.duration,()=>{i=!1})}}},Fe=(l,f,g)=>{const{title:I,disabled:x}=d[f],C=k(d[f],f);x||(st(e.beforeChange,{args:[C],done:()=>{q(f),ue()}}),ot(l)),t("clickTab",{name:C,title:I,event:g,disabled:x})},We=l=>{n=l.isFixed,t("scroll",l)},De=l=>{j(()=>{X(l),ue(!0)})},Ee=()=>{for(let l=0;l<d.length;l++){const{top:f}=D(d[l].$el);if(f>de.value)return l===0?0:l-1}return d.length-1},Ge=()=>{if(e.scrollspy&&!i){const l=Ee();q(l)}},Ue=()=>{if(e.type==="line"&&d.length)return a("div",{class:ee("line"),style:u.lineStyle},null)},fe=()=>{var l,f,g;const{type:I,border:x,sticky:C}=e,H=[a("div",{ref:C?void 0:v,class:[ee("wrap"),{[it]:I==="line"&&x}]},[a("div",{ref:h,role:"tablist",class:ee("nav",[I,{shrink:e.shrink,complete:T.value}]),style:p.value,"aria-orientation":"horizontal"},[(l=o["nav-left"])==null?void 0:l.call(o),d.map(J=>J.renderTitle(Fe)),Ue(),(f=o["nav-right"])==null?void 0:f.call(o)])]),(g=o["nav-bottom"])==null?void 0:g.call(o)];return C?a("div",{ref:v},[H]):H},he=()=>{A(),j(()=>{var l,f;U(!0),(f=(l=m.value)==null?void 0:l.swipeRef.value)==null||f.resize()})};z(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],A),z(Be,he),z(()=>e.active,l=>{l!==N.value&&X(l)}),z(()=>d.length,()=>{u.inited&&(X(e.active),A(),j(()=>{U(!0)}))});const Ve=()=>{X(e.active,!0),j(()=>{u.inited=!0,v.value&&(r=D(v.value).height),U(!0)})},Ke=(l,f)=>t("rendered",l,f);return ce({resize:he,scrollTo:De}),nt(A),at(A),Te(Ve),Ae(c,A),Ce("scroll",Ge,{target:b,passive:!0}),P({id:w,props:e,setLine:A,scrollable:T,onRendered:Ke,currentName:N,setTitleRefs:y,scrollIntoView:U}),()=>a("div",{ref:c,class:ee([e.type])},[e.sticky?a(Ot,{container:c.value,offsetTop:W.value,onScroll:We},{default:()=>[fe()]}):fe(),a(Wt,{ref:m,count:d.length,inited:u.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:u.currentIndex,onChange:q},{default:()=>{var l;return[(l=o.default)==null?void 0:l.call(o)]}})])}});const[Gt,ye]=O("tab"),Ut=F({name:Gt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:R,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:M},setup(e,{slots:t}){const o=B(()=>{const i={},{type:n,color:c,disabled:h,isActive:v,activeColor:m,inactiveColor:w}=e;c&&n==="card"&&(i.borderColor=c,h||(v?i.backgroundColor=c:i.color=c));const s=v?m:w;return s&&(i.color=s),i}),r=()=>{const i=a("span",{class:ye("text",{ellipsis:!e.scrollable})},[t.title?t.title():e.title]);return e.dot||G(e.badge)&&e.badge!==""?a(rt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[i]}):i};return()=>a("div",{id:e.id,role:"tab",class:[ye([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:o.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[r()])}}),[Vt,se]=O("tab"),Kt=ke({},ct,{dot:Boolean,name:R,badge:R,title:String,disabled:Boolean,titleClass:dt,titleStyle:[String,Object],showZeroBadge:M});var Mt=F({name:Vt,props:Kt,setup(e,{slots:t}){const o=$e(),r=$(!1),i=ut(),{parent:n,index:c}=Re(He);if(!n)return;const h=()=>{var s;return(s=e.name)!=null?s:c.value},v=()=>{r.value=!0,n.props.lazyRender&&j(()=>{n.onRendered(h(),e.title)})},m=B(()=>{const s=h()===n.currentName.value;return s&&!r.value&&v(),s}),w=s=>a(Ut,mt({key:o,id:`${n.id}-${c.value}`,ref:n.setTitleRefs(c.value),style:e.titleStyle,class:e.titleClass,isActive:m.value,controls:o,scrollable:n.scrollable.value,activeColor:n.props.titleActiveColor,inactiveColor:n.props.titleInactiveColor,onClick:y=>s(i.proxy,c.value,y)},ge(n.props,["type","color","shrink"]),ge(e,["dot","badge","title","disabled","showZeroBadge"])),{title:t.title}),b=$(!m.value);return z(m,s=>{s?b.value=!1:ft(()=>{b.value=!0})}),z(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),ht(Rt,m),ce({id:o,renderTitle:w}),()=>{var s;const y=`${n.id}-${c.value}`,{animated:d,swipeable:P,scrollspy:u,lazyRender:T}=n.props;if(!t.default&&!d)return;const p=u||m.value;if(d||P)return a(ze,{id:o,role:"tabpanel",class:se("panel-wrapper",{inactive:b.value}),tabindex:m.value?0:-1,"aria-hidden":!m.value,"aria-labelledby":y},{default:()=>{var W;return[a("div",{class:se("panel")},[(W=t.default)==null?void 0:W.call(t)])]}});const N=r.value||u||!T?(s=t.default)==null?void 0:s.call(t):null;return Pe(a("div",{id:o,role:"tabpanel",class:se("panel"),tabindex:p?0:-1,"aria-labelledby":y},[N]),[[vt,p]])}}});const Zt=Z(Mt),qt=Z(Et),[Xt,_e]=O("tag"),Jt={size:String,mark:Boolean,show:M,type:te("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var Yt=F({name:Xt,props:Jt,emits:["close"],setup(e,{slots:t,emit:o}){const r=c=>{c.stopPropagation(),o("close",c)},i=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},n=()=>{var c;const{type:h,mark:v,plain:m,round:w,size:b,closeable:s}=e,y={mark:v,plain:m,round:w};b&&(y[b]=b);const d=s&&a(pt,{name:"cross",class:[_e("close"),bt],onClick:r},null);return a("span",{style:i(),class:_e([y,h])},[(c=t.default)==null?void 0:c.call(t),d])};return()=>a(gt,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?n():null]})}});const Le=Z(Yt),[Qt,S]=O("card"),en={tag:String,num:R,desc:String,thumb:String,title:String,price:R,centered:Boolean,lazyLoad:Boolean,currency:te("¥"),thumbLink:String,originPrice:R};var tn=F({name:Qt,props:en,emits:["clickThumb"],setup(e,{slots:t,emit:o}){const r=()=>{if(t.title)return t.title();if(e.title)return a("div",{class:[S("title"),"van-multi-ellipsis--l2"]},[e.title])},i=()=>{if(t.tag||e.tag)return a("div",{class:S("tag")},[t.tag?t.tag():a(Le,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},n=()=>t.thumb?t.thumb():a(yt,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),c=()=>{if(t.thumb||e.thumb)return a("a",{href:e.thumbLink,class:S("thumb"),onClick:m=>o("clickThumb",m)},[n(),i()])},h=()=>{if(t.desc)return t.desc();if(e.desc)return a("div",{class:[S("desc"),"van-ellipsis"]},[e.desc])},v=()=>{const m=e.price.toString().split(".");return a("div",null,[a("span",{class:S("price-currency")},[e.currency]),a("span",{class:S("price-integer")},[m[0]]),K("."),a("span",{class:S("price-decimal")},[m[1]])])};return()=>{var m,w,b;const s=t.num||G(e.num),y=t.price||G(e.price),d=t["origin-price"]||G(e.originPrice),P=s||y||d||t.bottom,u=y&&a("div",{class:S("price")},[t.price?t.price():v()]),T=d&&a("div",{class:S("origin-price")},[t["origin-price"]?t["origin-price"]():`${e.currency} ${e.originPrice}`]),p=s&&a("div",{class:S("num")},[t.num?t.num():`x${e.num}`]),k=t.footer&&a("div",{class:S("footer")},[t.footer()]),N=P&&a("div",{class:S("bottom")},[(m=t["price-top"])==null?void 0:m.call(t),u,T,p,(w=t.bottom)==null?void 0:w.call(t)]);return a("div",{class:S()},[a("div",{class:S("header")},[c(),a("div",{class:S("content",{centered:e.centered})},[a("div",null,[r(),h(),(b=t.tags)==null?void 0:b.call(t)]),N])]),k])}}});const nn=Z(tn);const an={name:"FTab",computed:{pageHeight:function(){return this.$refs.root?"height:"+this.$refs.root.$el.clientHeight+"px;":""}},inject:["navParams"],props:["relationKey"],setup(e,t){const{parent:o}=Re(e.relationKey);return{parent:o}},data(){return{tabsActive:0,swipeWidth:0,images:["https://fastly.jsdelivr.net/npm/@vant/assets/apple-1.jpeg","https://fastly.jsdelivr.net/npm/@vant/assets/apple-2.jpeg","https://fastly.jsdelivr.net/npm/@vant/assets/apple-3.jpeg","https://fastly.jsdelivr.net/npm/@vant/assets/apple-3.jpeg"],gridItems:[],listItems:[]}},created(){},mounted(){this.init()},activated(){},deactivated(){this.setScrollCache()},beforeUnmount(){this.setScrollCache()},methods:{init(){j(()=>{this.gridTest(),this.load(!0);let e=this.parent.getScrollTop(this.$options.name,this.$el.scrollTop);e!=null&&(this.$el.scrollTop=e,console.log("mounted",this.$el.scrollTop))}),this.callNextTick()},gridTest(){this.gridItems=[],this.gridItems.push({title:"van-li",url:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"}),this.gridItems.push({title:"scroller-li",url:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"}),this.gridItems.push({title:"theme",url:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"}),this.gridItems.push({title:"echarts",url:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"}),this.gridItems.push({title:"navBar",url:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"}),this.gridItems.push({title:"语言",url:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"}),this.gridItems.push({title:"页面切换数据交互",url:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"})},async load(e,t){let o=!1,r=0,i=20;e||(this.listItems.length%i==0?r=this.listItems.length/i:o=!0);let n=await wt.Get({page:r,pageSize:20},"/api-dev/list/get").catch(c=>{});e&&(this.listItems=[]),n&&n.code==200&&(this.listItems.push(...n.data.datas),n.data.datas.length<20&&(o=!0)),Tt.isFunction(t)&&t({isFinished:o})},setScrollCache(){this.parent.setScrollTop(this.$options.name,this.$el.scrollTop),console.log("beforeUnmount",this.$el.scrollTop)},rendered(){setTimeout(()=>{let e=this.parent.getScrollTop(this.$options.name,this.$el.scrollTop);e!=null&&(this.$el.scrollTop=e,console.log("mounted",this.$el.scrollTop))},20)},callNextTick(){j(()=>{this.swipeWidth=this.$refs.root.$el.clientWidth/3})},clickGrid(e){let t=null;e.title=="van-li"?t="list_van":e.title=="scroller-li"?t="list_scroller":e.title=="theme"?be().setData(be().data=="dark"?"light":"dark"):e.title=="echarts"?t="echarts":e.title=="navBar"?this.navParams.nav.show=!this.navParams.nav.show:e.title=="语言"?this.parent.changeLan():e.title=="页面切换数据交互"&&(t="data_trans"),t&&this.$router.push({name:t,state:t=="data_trans"?{data:{userId:"123"}}:null})}}},ln=["src"],sn={style:{margin:"5px 0px 10px 0px",color:"#707070"},class:"three-row"};function on(e,t,o,r,i,n){const c=ze,h=je,v=Bt,m=$t,w=Le,b=It,s=nn,y=Ct,d=Zt,P=kt,u=qt,T=xt("wave");return L(),Y("div",null,[a(u,{ref:"root",style:{width:"100vw"},active:i.tabsActive,"onUpdate:active":t[0]||(t[0]=p=>i.tabsActive=p),onRendered:n.rendered,animated:""},{default:_(()=>[a(d,{title:"标签 1"},{default:_(()=>[a(y,{direction:"vertical",fill:"",size:0},{default:_(()=>[a(h,{width:i.swipeWidth,loop:!1},{default:_(()=>[(L(!0),Y(ae,null,ie(i.images,p=>(L(),le(c,{style:V({height:i.swipeWidth+"px"}),key:p},{default:_(()=>[Q("img",{style:V({width:i.swipeWidth+"px",height:i.swipeWidth+"px"}),src:p},null,12,ln)]),_:2},1032,["style"]))),128))]),_:1},8,["width"]),a(m,{square:"",class:"van-hairline--bottom"},{default:_(()=>[(L(!0),Y(ae,null,ie(i.gridItems,(p,k)=>Pe((L(),le(v,{key:k,icon:p.url,text:p.title,onClick:N=>n.clickGrid(p)},null,8,["icon","text","onClick"])),[[T]])),128))]),_:1}),(L(!0),Y(ae,null,ie(i.listItems,(p,k)=>(L(),le(s,{key:k,class:"van-hairline--bottom",num:"2",price:"2.00",desc:"",title:k+" "+p.title,thumb:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"},{desc:_(()=>[Q("div",sn,St(p.message)+"' ",1)]),tags:_(()=>[a(w,{plain:"",type:"primary"},{default:_(()=>[K("标签")]),_:1}),a(w,{plain:"",type:"primary"},{default:_(()=>[K("标签")]),_:1})]),footer:_(()=>[a(b,{size:"mini"},{default:_(()=>[K("按钮")]),_:1}),a(b,{size:"mini"},{default:_(()=>[K("按钮")]),_:1})]),_:2},1032,["title"]))),128))]),_:1})]),_:1}),a(d,{title:"标签 2"},{default:_(()=>[Q("div",{style:V([{width:"100vw"},n.pageHeight])},null,4)]),_:1}),a(d,{title:"标签 3"},{default:_(()=>[Q("div",{style:V([{width:"100vw"},n.pageHeight])},null,4)]),_:1}),a(d,{title:"标签 4"},{default:_(()=>[a(P,{style:V(n.pageHeight),description:"内容 4"},null,8,["style"])]),_:1})]),_:1},8,["active","onRendered"])])}const fn=_t(an,[["render",on],["__scopeId","data-v-9b65c8cd"]]);export{fn as default};
